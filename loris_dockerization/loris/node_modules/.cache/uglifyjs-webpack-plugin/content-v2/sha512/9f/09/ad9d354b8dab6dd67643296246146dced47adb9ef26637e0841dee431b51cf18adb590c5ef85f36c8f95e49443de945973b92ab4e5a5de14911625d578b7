{"map":"{\"version\":3,\"sources\":[\"webpack/bootstrap\",\"external \\\"React\\\"\",\"/var/www/loris/modules/dataquery/jsx/react.filterBuilder.js\"],\"names\":[\"installedModules\",\"__webpack_require__\",\"moduleId\",\"exports\",\"module\",\"i\",\"l\",\"modules\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"getDefault\",\"getModuleExports\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"React\",\"_react\",\"LogicOperator\",\"props\",\"_classCallCheck\",\"this\",\"_this\",\"_possibleConstructorReturn\",\"__proto__\",\"getPrototypeOf\",\"changeOperator\",\"op\",\"updateGroupOperator\",\"andClass\",\"orClass\",\"logicOperator\",\"_react2\",\"default\",\"createElement\",\"className\",\"role\",\"type\",\"onClick\",\"Component\",\"FilterRule\",\"_this2\",\"state\",\"operators\",\"equal\",\"notEqual\",\"lessThanEqual\",\"greaterThanEqual\",\"startsWith\",\"contains\",\"isNull\",\"isNotNull\",\"selectInstrument\",\"fieldSelect\",\"operatorSelect\",\"valueChange\",\"valueSet\",\"updateVisit\",\"loris\",\"event\",\"_this3\",\"rule\",\"$\",\"category\",\"data\",\"updateRule\",\"index\",\"JSON\",\"field\",\"fieldType\",\"operator\",\"visit\",\"candidates\",\"setState\",\"_this4\",\"responseHandler\",\"allSessions\",\"allCandiates\",\"length\",\"updateSessions\",\"ajaxRetrieve\",\"script\",\"instrument\",\"_this5\",\"fieldIndex\",\"forVisits\",\"visits\",\"fields\",\"map\",\"inputOptions\",\"input\",\"operatorKey\",\"options\",\"inputType\",\"split\",\"onChange\",\"enumToArray\",\"option\",\"keys\",\"Visits\",\"items\",\"item\",\"deleteRule\",\"FilterGroup\",\"_this6\",\"updateChild\",\"addChild\",\"deleteChild\",\"child\",\"group\",\"updateGroup\",\"updateFilter\",\"getSessions\",\"sessions\",\"session\",\"activeOperator\",\"children\",\"_this7\",\"deleteGroup\",\"deleteButton\",\"FilterBuilder\",\"_this8\",\"filter\",\"window\"],\"mappings\":\"mBACA,IAAAA,oBAGA,SAAAC,oBAAAC,UAGA,GAAAF,iBAAAE,UAAA,CACA,OAAAF,iBAAAE,UAAAC,QAGA,IAAAC,OAAAJ,iBAAAE,WACAG,EAAAH,SACAI,EAAA,MACAH,YAIAI,QAAAL,UAAAM,KAAAJ,OAAAD,QAAAC,OAAAA,OAAAD,QAAAF,qBAGAG,OAAAE,EAAA,KAGA,OAAAF,OAAAD,QAKAF,oBAAAQ,EAAAF,QAGAN,oBAAAS,EAAAV,iBAGAC,oBAAAU,EAAA,SAAAR,QAAAS,KAAAC,QACA,IAAAZ,oBAAAa,EAAAX,QAAAS,MAAA,CACAG,OAAAC,eAAAb,QAAAS,MAA0CK,WAAA,KAAAC,IAAAL,WAK1CZ,oBAAAkB,EAAA,SAAAhB,SACA,UAAAiB,SAAA,aAAAA,OAAAC,YAAA,CACAN,OAAAC,eAAAb,QAAAiB,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAAb,QAAA,cAAiDmB,MAAA,QAQjDrB,oBAAAsB,EAAA,SAAAD,MAAAE,MACA,GAAAA,KAAA,EAAAF,MAAArB,oBAAAqB,OACA,GAAAE,KAAA,EAAA,OAAAF,MACA,GAAAE,KAAA,UAAAF,QAAA,UAAAA,OAAAA,MAAAG,WAAA,OAAAH,MACA,IAAAI,GAAAX,OAAAY,OAAA,MACA1B,oBAAAkB,EAAAO,IACAX,OAAAC,eAAAU,GAAA,WAAyCT,WAAA,KAAAK,QACzC,GAAAE,KAAA,UAAAF,OAAA,SAAA,IAAA,IAAAM,OAAAN,MAAArB,oBAAAU,EAAAe,GAAAE,IAAA,SAAAA,KAAgH,OAAAN,MAAAM,MAAqBC,KAAA,KAAAD,MACrI,OAAAF,IAIAzB,oBAAA6B,EAAA,SAAA1B,QACA,IAAAS,OAAAT,QAAAA,OAAAqB,WACA,SAAAM,aAA2B,OAAA3B,OAAA,YAC3B,SAAA4B,mBAAiC,OAAA5B,QACjCH,oBAAAU,EAAAE,OAAA,IAAAA,QACA,OAAAA,QAIAZ,oBAAAa,EAAA,SAAAmB,OAAAC,UAAsD,OAAAnB,OAAAoB,UAAAC,eAAA5B,KAAAyB,OAAAC,WAGtDjC,oBAAAoC,EAAA,GAIA,OAAApC,oBAAAA,oBAAAqC,EAAA,kCClFAlC,OAAAD,QAAAoC,+1BCQA,IAAAC,OAAAvC,oBAAA;;;;;;;SAKMwC,uEACJ,SAAAA,cAAAC,OAAmBC,gBAAAC,KAAAH,eAAA,IAAAI,MAAAC,2BAAAF,MAAAH,cAAAM,WAAAhC,OAAAiC,eAAAP,gBAAAjC,KAAAoC,KAAAF,QAEjBG,MAAAI,eAAsBJ,MAAAI,eAAApB,KAAtBgB,OAFiB,OAAAA,sFAKJK,IAEbN,KAAAF,MAAAS,oBAAAD,4CAMA,IAAIE,SAAJ,MACEC,QADF,MAIA,GAAIT,KAAAF,MAAAY,gBAAJ,EAAoC,CAClCD,SAAAA,eACAD,UAAAA,cACK,CACLA,UAAAA,eACAC,SAAAA,UAEF,OACEE,QAAAC,QAAAC,cAAA,OAAKC,UAAL,YAA2BC,KAA3B,SACEJ,QAAAC,QAAAC,cAAA,UAAQG,KAAR,SAAsBF,UAAtBN,SAA2CS,QAASjB,KAAAK,eAAApB,KAAAe,KAApD,IAAA,OACAW,QAAAC,QAAAC,cAAA,UAAQG,KAAR,SAAsBF,UAAtBL,QAA0CQ,QAASjB,KAAAK,eAAApB,KAAAe,KAAnD,IAAA,iCA5BoBkB,OAAAA,eAqCtBC,mEACJ,SAAAA,WAAArB,OAAmBC,gBAAAC,KAAAmB,YAAA,IAAAC,OAAAlB,2BAAAF,MAAAmB,WAAAhB,WAAAhC,OAAAiC,eAAAe,aAAAvD,KAAAoC,KAAAF,QAEjBsB,OAAAC,OACEC,WACEC,MADS,IAETC,SAFS,KAGTC,cAHS,KAITC,iBAJS,KAKTC,WALS,aAMTC,SANS,WAOTC,OAPS,SAQTC,UAAW,aAEbpD,MAAO,IAET0C,OAAAW,iBAAwBX,OAAAW,iBAAA9C,KAAxBmC,QACAA,OAAAY,YAAmBZ,OAAAY,YAAA/C,KAAnBmC,QACAA,OAAAa,eAAsBb,OAAAa,eAAAhD,KAAtBmC,QACAA,OAAAc,YAAmBd,OAAAc,YAAAjD,KAAnBmC,QACAA,OAAAe,SAAgBf,OAAAe,SAAAlD,KAAhBmC,QACAA,OAAAgB,YAAmBhB,OAAAgB,YAAAnD,KAAnBmC,QApBiB,OAAAA,8FAwBjBpB,KAAAmC,SAAgBE,MAAAA,SAAerC,KAAfqC,SAAhB,+DAGeC,OAAO,IAAAC,OAAAvC,KAEtB,IAAIwC,KAAOxC,KAAAF,MAAX0C,KACA,GAAIF,MAAAA,OAAJ5D,MAAwB,CACtB8D,KAAAA,WAAkBF,MAAAA,OAAlBE,MACAC,EAAAA,IAAMJ,MAAAA,QAANI,sCAA6DC,SAAUF,KAAvEC,YAAyF,SAAAE,MACvFH,KAAAA,OAAAA,KACAD,OAAAzC,MAAA8C,WAAsBL,OAAAzC,MAAtB+C,MAAAL,OAFFC,yDAOQH,OAEV,IAAIE,KAAOM,KAAAA,MAAWA,KAAAA,UAAe9C,KAAAF,MAArC0C,cACOA,KAAPO,aACOP,KAAPQ,iBACOR,KAAPS,gBACOT,KAAP9D,aACO8D,KAAPU,aACOV,KAAPW,WACA,GAAIb,MAAAA,OAAJ5D,MAAwB,CACtB8D,KAAAA,MAAaA,KAAAA,OAAYF,MAAAA,OAAZE,OAAAA,IAAbA,GACAA,KAAAA,UAAiBA,KAAAA,OAAYF,MAAAA,OAAZE,OAAAA,MAAjBA,KAEFxC,KAAAF,MAAA8C,WAAsB5C,KAAAF,MAAtB+C,MAAAL,4DAGaF,OAEb,IAAIE,KAAOM,KAAAA,MAAWA,KAAAA,UAAe9C,KAAAF,MAArC0C,cACOA,KAAPS,gBACOT,KAAP9D,aACO8D,KAAPU,aACOV,KAAPW,WACA,GAAIb,MAAAA,OAAJ5D,MAAwB,CACtB8D,KAAAA,SAAgBF,MAAAA,OAAhBE,MAEFxC,KAAAF,MAAA8C,WAAsB5C,KAAAF,MAAtB+C,MAAAL,MACA,GAAIA,KAAAA,WAAAA,UAA8BA,KAAAA,WAAlC,YAAiE,CAC/DxC,KAAAoD,UACE1E,MAAO,SAETsB,KAAAmC,4DAIQG,OACV,IAAIE,KAAOM,KAAAA,MAAWA,KAAAA,UAAe9C,KAAAF,MAArC0C,cACOA,KAAPU,aACOV,KAAPW,WAEAX,KAAAA,MAAaF,MAAAA,OAAbE,MAEAxC,KAAAoD,UACE1E,MAAO4D,MAAAA,OAAa5D,QAEtBsB,KAAAmC,WACAnC,KAAAF,MAAA8C,WAAsB5C,KAAAF,MAAtB+C,MAAAL,kDAGS,IAAAa,OAAArD,KAET,IAAIwC,KAAOM,KAAAA,MAAWA,KAAAA,UAAe9C,KAAAF,MAArC0C,OACA,GAAIxC,KAAAqB,MAAJ3C,MAAsB,CACpB,IAAI4E,gBAAkB,SAAlBA,gBAAkBX,MACpB,IAAIlF,OAAJ,EACA,IAAI8F,eACJ,IAAIC,gBAGJ,IAAK/F,EAAL,EAAYA,EAAIkF,KAAhBc,OAAAhG,IAAkC,CAChC,IAAK8F,YAAYZ,KAAAA,GAAjB,IAA8B,CAC5BY,YAAYZ,KAAAA,GAAZY,OAEFA,YAAYZ,KAAAA,GAAZY,IAAAA,KAA6BZ,KAAAA,GAA7BY,IACA,IAAKC,aAAab,KAAAA,GAAlB,IAA+B,CAC7Ba,aAAab,KAAAA,GAAba,OAEFA,aAAab,KAAAA,GAAba,IAAAA,KAA8Bb,KAAAA,GAA9Ba,IAEFhB,KAAAA,YACEgB,aACAD,aAEFf,KAAAA,QAAerE,OAAAA,KAAfqE,cACAA,KAAAA,MAAAA,MACAa,OAAAvD,MAAA4D,eAA0BL,OAAAvD,MAA1B+C,MAAAL,OAEF,IAAImB,aAAe,SAAfA,aAAeC,QACjBnB,EAAAA,IAAMJ,MAAAA,QAAAA,mBAANI,QAEIC,SAAUF,KADZqB,WAEEd,MAAOP,KAFTO,MAGErE,MAAO2E,OAAAhC,MAAW3C,OAJtB+D,gBAAAA,SAUF,OAAQD,KAARS,UACE,IAAA,QACA,IAAA,SACEU,aAAAA,kBACA,MACF,IAAA,WACA,IAAA,YACEA,aAAAA,qBACA,MACF,IAAA,gBACEA,aAAAA,0BACA,MACF,IAAA,mBACEA,aAAAA,6BACA,MACF,IAAA,aACEA,aAAAA,uBACA,MACF,IAAA,WACEA,aAAAA,qBACA,MACF,QACE,wDAKIrB,OAEV,IAAIE,KAAOM,KAAAA,MAAWA,KAAAA,UAAe9C,KAAAF,MAArC0C,OACAA,KAAAA,MAAaF,MAAAA,OAAbE,MAEA,GAAIF,MAAAA,OAAAA,QAAJ,MAAkC,CAEhCE,KAAAA,QAAerE,OAAAA,KAAYqE,KAAAA,WAA3BA,kBACK,CAELA,KAAAA,QAAeA,KAAAA,WAAAA,YAA4BF,MAAAA,OAA3CE,OAEFxC,KAAAF,MAAA4D,eAA0B1D,KAAAF,MAA1B+C,MAAAL,8CAGO,IAAAsB,OAAA9D,KAGP,IAAIwC,UAAJ,EACA,IAAIuB,gBAAJ,EACA,IAAIC,eAAJ,EACA,IAAIC,YAAJ,EACA,GAAIjE,KAAAF,MAAA0C,KAAJqB,WAAgC,CAE9B,IAAIK,OAASlE,KAAAF,MAAA0C,KAAA0B,OAAAC,IAA2B,SAAApB,MAAAF,OACtC,GAAIiB,OAAAhE,MAAA0C,KAAAO,OAAyBA,MAAAA,IAAAA,KAAiBe,OAAAhE,MAAA0C,KAA9CO,MAAqE,CACnEgB,WAAAA,MAEF,OACEpD,QAAAC,QAAAC,cAAA,UAAQ7B,IAAR6D,MAAoBnE,MAApBmE,OAAmCE,MAAAA,IAAAA,MAGvC,IAAIzB,aACJ,IAAI8C,gBACJ,IAAIC,SACJ,IAAIC,YAAJ,GACA,IAAIrC,kBACJ,IAAIsC,WACJ,IAAI7F,MAAJ,GACA,IAAI8F,aAEJ,GAAIxE,KAAAF,MAAA0C,KAAJQ,UAA+B,CAE7BwB,UAAYxE,KAAAF,MAAA0C,KAAAQ,UAAAyB,MAAZD,KACAF,YAAcE,UAAdF,GACA,IAAK,IAALtF,OAAgBgB,KAAAqB,MAAhBC,UAAsC,CACpCA,UAAAA,KACEX,QAAAC,QAAAC,cAAA,UAAQnC,MAARM,IAAoB0F,SAAU1E,KAA9BiC,gBACGjC,KAAAqB,MAAAC,UAAAtC,OAIPN,MAASsB,KAAAF,MAAA0C,KAADS,SAA6BjD,KAAAF,MAAA0C,KAA7BS,SAARvE,GACAuD,eACEtB,QAAAC,QAAAC,cAAA,UAAQC,UAAR,qBAAuC4D,SAAU1E,KAAjDiC,eAAsEvD,OACpEiC,QAAAC,QAAAC,cAAA,UAAQnC,MADV,KAEG4C,WAGL,GAAItB,KAAAF,MAAA0C,KAAAS,UACFjD,KAAAF,MAAA0C,KAAAS,WADE,UAEFjD,KAAAF,MAAA0C,KAAAS,WAFF,YAGE,CAGA,OAAAqB,aACE,IAAA,OACEF,aAAeO,YAAY3E,KAAAF,MAAA0C,KAA3B4B,WACAG,QAAUH,aAAAD,IAAiB,SAAAS,OAAA/B,OACzB,OACElC,QAAAC,QAAAC,cAAA,UAAQ7B,IAAR6D,MAAoBnE,MAApBkG,QACGA,UAIPlG,MAASsB,KAAAF,MAAA0C,KAAD9D,MAA0BsB,KAAAF,MAAA0C,KAA1B9D,MAARA,GACA2F,MACE1D,QAAAC,QAAAC,cAAA,UAAQC,UAAR,oBAAsC4D,SAAU1E,KAAhDkC,YAAkExD,OAChEiC,QAAAC,QAAAC,cAAA,UAAQnC,MADV,KAEG6F,SAGL,MACF,QACEF,MACE1D,QAAAC,QAAAC,cAAA,SAAOG,KAAP,OACOF,UADP,oBAEO4D,SAAU1E,KAFjBkC,YAGOxD,MAAOsB,KAAAF,MAAA0C,KAAgB9D,QAGhC,OAGN,GAAIsB,KAAAF,MAAA0C,KAAJU,MAA2B,CAGzBe,OAAS9F,OAAA0G,KAAY7E,KAAAF,MAAZgF,QAAAX,IAAmC,SAAAjB,MAAAL,OAC1C,OACElC,QAAAC,QAAAC,cAAA,UAAQ7B,IAAR6D,MAAoBnE,MAApBwE,OACGA,SAIPc,UACErD,QAAAC,QAAAC,cAAA,UAAQC,UAAR,oBAAsC4D,SAAU1E,KAAhDoC,YAAkE1D,MAAOsB,KAAAF,MAAA0C,KAAzEU,OACEvC,QAAAC,QAAAC,cAAA,UAAQnC,MAAR,OAAA,cACCuF,SAKTzB,KACE7B,QAAAC,QAAAC,cAAA,MAAA,KACEF,QAAAC,QAAAC,cAAA,OAAKC,UAAL,aACEH,QAAAC,QAAAC,cAAA,SAAOC,UAAP,mBAAoCd,KAAAF,MAAA0C,KAAgBqB,aAEtDlD,QAAAC,QAAAC,cAAA,OAAKC,UAAL,aACEH,QAAAC,QAAAC,cAAA,UAAQC,UAAR,oBAAsC4D,SAAU1E,KAAhDgC,YAAkEtD,MAAlEqF,YACEpD,QAAAC,QAAAC,cAAA,UAAQnC,MADV,KAEGwF,QAHLjC,eAAAoC,MAOGL,gBAIF,CAEL,IAAIO,SAAUvE,KAAAF,MAAAiF,MAAAZ,IAAqB,SAAAa,KAAAnC,OACjC,OACElC,QAAAC,QAAAC,cAAA,UAAQ7B,IAAR6D,MAAoBnE,MAAOsG,KAA3BtC,UAA2CsC,KAAKtC,YAGpDF,KACE7B,QAAAC,QAAAC,cAAA,UAAQ6D,SAAU1E,KAAlB+B,iBAAyCjB,UAAzC,sBACEH,QAAAC,QAAAC,cAAA,UAAQnC,MADV,KAEG6F,UAIP,OACE5D,QAAAC,QAAAC,cAAA,OAAKC,UAAL,uBACEH,QAAAC,QAAAC,cAAA,OAAKC,UAAL,cAAA0B,KAEE7B,QAAAC,QAAAC,cAAA,OAAKC,UAAL,YACEH,QAAAC,QAAAC,cAAA,UAAQC,UAAR,mCACQG,QAASjB,KAAAF,MAAAmF,WAAAhG,KAAAe,KAAiCA,KAAAF,MAAjC+C,QAEflC,QAAAC,QAAAC,cAAA,QAAMC,UAHR,+BAAA,qCA9SaI,OAAAA,eA6TnBgE,qEACJ,SAAAA,YAAApF,OAAmBC,gBAAAC,KAAAkF,aAAA,IAAAC,OAAAjF,2BAAAF,MAAAkF,YAAA/E,WAAAhC,OAAAiC,eAAA8E,cAAAtH,KAAAoC,KAAAF,QAEjBqF,OAAA9D,SACA8D,OAAAC,YAAmBD,OAAAC,YAAAnG,KAAnBkG,QACAA,OAAA5E,oBAA2B4E,OAAA5E,oBAAAtB,KAA3BkG,QACAA,OAAAzB,eAAsByB,OAAAzB,eAAAzE,KAAtBkG,QACAA,OAAAE,SAAgBF,OAAAE,SAAApG,KAAhBkG,QACAA,OAAAG,YAAmBH,OAAAG,YAAArG,KAAnBkG,QAPiB,OAAAA,+EAUPtC,MAAO0C,OAGjB,IAAIC,MAAQxF,KAAAF,MAAZ0F,MACAA,MAAAA,SAAAA,OAAAA,MAEA,GAAIxF,KAAAF,MAAJ+C,MAAsB,CAEpB7C,KAAAF,MAAA2F,YAAuBzF,KAAAF,MAAvB+C,MAAA2C,WACK,CAELxF,KAAAF,MAAA4F,aAAAF,wEAIgBvC,UAElB,IAAIuC,MAAQxF,KAAAF,MAAZ0F,MACAA,MAAAA,eAAAA,SAGAA,MAAAA,QAAgBG,YAAhBH,OAEA,GAAIxF,KAAAF,MAAJ+C,MAAsB,CAEpB7C,KAAAF,MAAA2F,YAAuBzF,KAAAF,MAAvB+C,MAAA2C,WACK,CAELxF,KAAAF,MAAA4F,aAAAF,8DAIW3C,MAAO0C,OAEpB,IAAIC,MAAQxF,KAAAF,MAAZ0F,MACEI,YACAC,WACFL,MAAAA,SAAAA,OAAAA,MAGAA,MAAAA,QAAgBG,YAAhBH,OACA,GAAIxF,KAAAF,MAAJ+C,MAAsB,CAEpB7C,KAAAF,MAAA4D,eAA0B1D,KAAAF,MAA1B+C,MAAA2C,WACK,CAELxF,KAAAF,MAAA4F,aAAAF,kDAIKxE,MAEP,IAAIuE,WAAJ,EACEC,MAAQxF,KAAAF,MADV0F,MAIA,GAAIxE,OAAJ,OAAqB,CACnBuE,OACEvE,KAAM,YAEH,CACLuE,OACEvE,KADM,QAEN8E,eAFM,EAGNC,WAEI/E,KAAM,UAKdwE,MAAAA,SAAAA,KAAAA,OAEA,GAAIxF,KAAAF,MAAJ+C,MAAsB,CAEpB7C,KAAAF,MAAA2F,YAAuBzF,KAAAF,MAAvB+C,MAAA2C,WACK,CAELxF,KAAAF,MAAA4F,aAAAF,wDAIQ3C,OAGV,IAAI2C,MAAQxF,KAAAF,MAAZ0F,MACAA,MAAAA,SAAAA,OAAAA,MAAAA,GAGAA,MAAAA,QAAgBG,YAAhBH,OAGA,GAAIxF,KAAAF,MAAJ+C,MAAsB,CAEpB7C,KAAAF,MAAA2F,YAAuBzF,KAAAF,MAAvB+C,MAAA2C,WACK,CAELxF,KAAAF,MAAA4F,aAAAF,gDAIK,IAAAQ,OAAAhG,KAEP,IAAIU,cACFC,QAAAC,QAAAC,cAAAhB,eACEa,cAAeV,KAAAF,MAAA0F,MADjBM,eAEEvF,oBAAqBP,KAAKO,sBAK9B,IAAIwF,SAAW/F,KAAAF,MAAA0F,MAAAO,SAAA5B,IAA8B,SAAAoB,MAAA1C,OAC3C,GAAI0C,MAAAA,OAAJ,OAA2B,CACzB,OACE5E,QAAAC,QAAAC,cAAA,MAAI7B,IAAJ6D,OACElC,QAAAC,QAAAC,cAAAM,YAAYqB,KAAZ+C,MACYR,MAAOiB,OAAAlG,MADnBiF,MAEYlC,MACAD,WAAYoD,OAHxBZ,YAIY1B,eAAgBsC,OAJ5BtC,eAKYuB,WAAYe,OALxBV,YAMYR,OAAQkB,OAAAlG,MAAWgF,eAI9B,GAAIS,MAAAA,OAAJ,QAA4B,CACjC,OACE5E,QAAAC,QAAAC,cAAA,MAAI7B,IAAJ6D,OACElC,QAAAC,QAAAC,cAAAqE,aAAaM,MAAbD,MACaR,MAAOiB,OAAAlG,MADpBiF,MAEalC,MACA4C,YAAaO,OAH1BZ,YAIa1B,eAAgBsC,OAJ7BtC,eAKauC,YAAaD,OAL1BV,YAMaR,OAAQkB,OAAAlG,MAAWgF,aAOxC,IAAIoB,kBAAJ,EAEA,GAAIlG,KAAAF,MAAJmG,YAA4B,CAE1BC,aACEvF,QAAAC,QAAAC,cAAA,UACEC,UADF,mCAEEG,QAASjB,KAAAF,MAAAmG,YAAAhH,KAAAe,KAAkCA,KAAAF,MAAlC+C,QAETlC,QAAAC,QAAAC,cAAA,QAAMC,UAJR,+BAAA,iBAQJ,OACEH,QAAAC,QAAAC,cAAA,OAAKC,UAAL,QACEH,QAAAC,QAAAC,cAAA,MAAIC,UAAJ,WACEH,QAAAC,QAAAC,cAAA,KAAA,KACEF,QAAAC,QAAAC,cAAA,OAAKC,UAAL,OACEH,QAAAC,QAAAC,cAAA,OAAKC,UAAL,YACGJ,eAEHC,QAAAC,QAAAC,cAAA,OAAKC,UAAL,aAAAoF,aAEEvF,QAAAC,QAAAC,cAAA,UAAQC,UAAR,oCACQG,QAASjB,KAAAqF,SAAApG,KAAAe,KAAA,UAEfW,QAAAC,QAAAC,cAAA,QAAMC,UAHR,4BAAA,cAKAH,QAAAC,QAAAC,cAAA,UAAQC,UAAR,oCACQG,QAASjB,KAAAqF,SAAApG,KAAAe,KAAA,SAEfW,QAAAC,QAAAC,cAAA,QAAMC,UAHR,4BAAA,eAOJH,QAAAC,QAAAC,cAAA,KAAA,KACGkF,qCA5LW7E,OAAAA,eAwMpBiF,yEACJ,SAAAA,cAAArG,OAAmBC,gBAAAC,KAAAmG,eAAA,IAAAC,OAAAlG,2BAAAF,MAAAmG,cAAAhG,WAAAhC,OAAAiC,eAAA+F,gBAAAvI,KAAAoC,KAAAF,QAEjBsG,OAAA/E,SAFiB,OAAA+E,yEAMjB,OACEzF,QAAAC,QAAAC,cAAA,MAAA,KACEF,QAAAC,QAAAC,cAAA,MAAIC,UAAJ,aAAA,UACAH,QAAAC,QAAAC,cAAA,OAAKC,UAAL,aACEH,QAAAC,QAAAC,cAAA,OAAKC,UAAL,qBACEH,QAAAC,QAAAC,cAAAqE,aAAaM,MAAOxF,KAAAF,MAApBuG,OACatB,MAAO/E,KAAAF,MADpBiF,MAEaW,aAAc1F,KAAAF,MAF3B4F,aAGaZ,OAAQ9E,KAAAF,MAAWgF,sCAfhB5D,OAAAA,WAwB5BoF,OAAAA,cAAAA,cACAA,OAAAA,WAAAA,WACAA,OAAAA,YAAAA,YACAA,OAAAA,cAAAA,+BAGEzG,cACAsB,WACA+D,YACAiB\",\"sourcesContent\":[\" \\t// The module cache\\n \\tvar installedModules = {};\\n\\n \\t// The require function\\n \\tfunction __webpack_require__(moduleId) {\\n\\n \\t\\t// Check if module is in cache\\n \\t\\tif(installedModules[moduleId]) {\\n \\t\\t\\treturn installedModules[moduleId].exports;\\n \\t\\t}\\n \\t\\t// Create a new module (and put it into the cache)\\n \\t\\tvar module = installedModules[moduleId] = {\\n \\t\\t\\ti: moduleId,\\n \\t\\t\\tl: false,\\n \\t\\t\\texports: {}\\n \\t\\t};\\n\\n \\t\\t// Execute the module function\\n \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n\\n \\t\\t// Flag the module as loaded\\n \\t\\tmodule.l = true;\\n\\n \\t\\t// Return the exports of the module\\n \\t\\treturn module.exports;\\n \\t}\\n\\n\\n \\t// expose the modules object (__webpack_modules__)\\n \\t__webpack_require__.m = modules;\\n\\n \\t// expose the module cache\\n \\t__webpack_require__.c = installedModules;\\n\\n \\t// define getter function for harmony exports\\n \\t__webpack_require__.d = function(exports, name, getter) {\\n \\t\\tif(!__webpack_require__.o(exports, name)) {\\n \\t\\t\\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\\n \\t\\t}\\n \\t};\\n\\n \\t// define __esModule on exports\\n \\t__webpack_require__.r = function(exports) {\\n \\t\\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\\n \\t\\t\\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\\n \\t\\t}\\n \\t\\tObject.defineProperty(exports, '__esModule', { value: true });\\n \\t};\\n\\n \\t// create a fake namespace object\\n \\t// mode & 1: value is a module id, require it\\n \\t// mode & 2: merge all properties of value into the ns\\n \\t// mode & 4: return value when already ns object\\n \\t// mode & 8|1: behave like require\\n \\t__webpack_require__.t = function(value, mode) {\\n \\t\\tif(mode & 1) value = __webpack_require__(value);\\n \\t\\tif(mode & 8) return value;\\n \\t\\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\\n \\t\\tvar ns = Object.create(null);\\n \\t\\t__webpack_require__.r(ns);\\n \\t\\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\\n \\t\\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\\n \\t\\treturn ns;\\n \\t};\\n\\n \\t// getDefaultExport function for compatibility with non-harmony modules\\n \\t__webpack_require__.n = function(module) {\\n \\t\\tvar getter = module && module.__esModule ?\\n \\t\\t\\tfunction getDefault() { return module['default']; } :\\n \\t\\t\\tfunction getModuleExports() { return module; };\\n \\t\\t__webpack_require__.d(getter, 'a', getter);\\n \\t\\treturn getter;\\n \\t};\\n\\n \\t// Object.prototype.hasOwnProperty.call\\n \\t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\\n\\n \\t// __webpack_public_path__\\n \\t__webpack_require__.p = \\\"\\\";\\n\\n\\n \\t// Load entry module and return exports\\n \\treturn __webpack_require__(__webpack_require__.s = 53);\\n\",\"module.exports = React;\",\"/**\\n *  The following file contains the components used for the filter builder tab\\n *\\n *  @author   Jordan Stirling <jstirling91@gmail.com>\\n *  @license  http://www.gnu.org/licenses/gpl-3.0.txt GPLv3\\n *  @link     https://github.com/mohadesz/Loris-Trunk\\n */\\n\\nimport React, {Component} from 'react';\\n\\n/*\\n *  The following component is used for displaying operator for the group component\\n */\\nclass LogicOperator extends Component {\\n  constructor(props) {\\n    super(props);\\n    this.changeOperator = this.changeOperator.bind(this);\\n  }\\n\\n  changeOperator(op) {\\n    // Wrapper function updating operator\\n    this.props.updateGroupOperator(op);\\n  }\\n\\n  render() {\\n    // Renders the html for the component\\n\\n    let andClass = 'btn',\\n      orClass = 'btn';\\n\\n    // Set operator to OR if logicOperator is 1, AND otherwise\\n    if (this.props.logicOperator === 1) {\\n      orClass += ' btn-primary';\\n      andClass += ' switch'\\n    } else {\\n      andClass += ' btn-primary';\\n      orClass += ' switch'\\n    }\\n    return (\\n      <div className='btn-group' role='group'>\\n        <button type='button' className={andClass} onClick={this.changeOperator.bind(this, 0)}>And</button>\\n        <button type='button' className={orClass} onClick={this.changeOperator.bind(this, 1)}>Or</button>\\n      </div>\\n    );\\n  }\\n}\\n\\n/*\\n *  The following component is used for displaying a filter rule\\n */\\nclass FilterRule extends Component {\\n  constructor(props) {\\n    super(props);\\n    this.state = {\\n      operators: {\\n        equal: '=',\\n        notEqual: '!=',\\n        lessThanEqual: '<=',\\n        greaterThanEqual: '>=',\\n        startsWith: 'startsWith',\\n        contains: 'contains',\\n        isNull: 'isNull',\\n        isNotNull: 'isNotNull'\\n      },\\n      value: '',\\n    };\\n    this.selectInstrument = this.selectInstrument.bind(this);\\n    this.fieldSelect = this.fieldSelect.bind(this);\\n    this.operatorSelect = this.operatorSelect.bind(this);\\n    this.valueChange = this.valueChange.bind(this);\\n    this.valueSet = this.valueSet.bind(this);\\n    this.updateVisit = this.updateVisit.bind(this);\\n  }\\n\\n  componentWillMount() {\\n    this.valueSet = loris.debounce(this.valueSet, 1000);\\n  }\\n\\n  selectInstrument(event) {\\n    // Update the rules instrument, getting the instruments avalible fields\\n    let rule = this.props.rule;\\n    if (event.target.value) {\\n      rule.instrument = event.target.value;\\n      $.get(loris.BaseURL + '/dataquery/ajax/datadictionary.php', {category: rule.instrument}, (data) => {\\n        rule.fields = data;\\n        this.props.updateRule(this.props.index, rule);\\n      }, 'json');\\n    }\\n  }\\n\\n  fieldSelect(event) {\\n    // Update the rules desired field, setting the rules field and field type\\n    let rule = JSON.parse(JSON.stringify(this.props.rule));\\n    delete rule.field;\\n    delete rule.fieldType;\\n    delete rule.operator;\\n    delete rule.value;\\n    delete rule.visit;\\n    delete rule.candidates;\\n    if (event.target.value) {\\n      rule.field = rule.fields[event.target.value].key[1];\\n      rule.fieldType = rule.fields[event.target.value].value.Type;\\n    }\\n    this.props.updateRule(this.props.index, rule);\\n  }\\n\\n  operatorSelect(event) {\\n    // Update the desired rule operation for the selected field\\n    let rule = JSON.parse(JSON.stringify(this.props.rule));\\n    delete rule.operator;\\n    delete rule.value;\\n    delete rule.visit;\\n    delete rule.candidates;\\n    if (event.target.value) {\\n      rule.operator = event.target.value;\\n    }\\n    this.props.updateRule(this.props.index, rule);\\n    if (rule.operator === 'isNull' || rule.operator === 'isNotNull') {\\n      this.setState({\\n        value: 'null'\\n      });\\n      this.valueSet();\\n    }\\n  }\\n\\n  valueChange(event) {\\n    let rule = JSON.parse(JSON.stringify(this.props.rule));\\n    delete rule.visit;\\n    delete rule.candidates;\\n\\n    rule.value = event.target.value;\\n\\n    this.setState({\\n      value: event.target.value\\n    });\\n    this.valueSet();\\n    this.props.updateRule(this.props.index, rule);\\n  }\\n\\n  valueSet() {\\n    // Update the value to filter for, and runs the query for the rules parameters\\n    let rule = JSON.parse(JSON.stringify(this.props.rule));\\n    if (this.state.value) {\\n      let responseHandler = (data) => {\\n        let i;\\n        let allSessions = {};\\n        let allCandiates = {};\\n        // Loop through data and divide into individual visits with unique PSCIDs\\n        // storing a master list of unique PSCIDs\\n        for (i = 0; i < data.length; i++) {\\n          if (!allSessions[data[i][1]]) {\\n            allSessions[data[i][1]] = [];\\n          }\\n          allSessions[data[i][1]].push(data[i][0]);\\n          if (!allCandiates[data[i][0]]) {\\n            allCandiates[data[i][0]] = [];\\n          }\\n          allCandiates[data[i][0]].push(data[i][1]);\\n        }\\n        rule.candidates = {\\n          allCandiates: allCandiates,\\n          allSessions: allSessions,\\n        };\\n        rule.session = Object.keys(allCandiates);\\n        rule.visit = 'All';\\n        this.props.updateSessions(this.props.index, rule);\\n      };\\n      let ajaxRetrieve = (script) => {\\n        $.get(loris.BaseURL + '/dataquery/ajax/' + script,\\n          {\\n            category: rule.instrument,\\n            field: rule.field,\\n            value: this.state.value,\\n          },\\n          responseHandler,\\n          'json',\\n        );\\n      };\\n      switch (rule.operator) {\\n        case 'equal':\\n        case 'isNull':\\n          ajaxRetrieve('queryEqual.php');\\n          break;\\n        case 'notEqual':\\n        case 'isNotNull':\\n          ajaxRetrieve('queryNotEqual.php');\\n          break;\\n        case 'lessThanEqual':\\n          ajaxRetrieve('queryLessThanEqual.php');\\n          break;\\n        case 'greaterThanEqual':\\n          ajaxRetrieve('queryGreaterThanEqual.php');\\n          break;\\n        case 'startsWith':\\n          ajaxRetrieve('queryStartsWith.php');\\n          break;\\n        case 'contains':\\n          ajaxRetrieve('queryContains.php');\\n          break;\\n        default:\\n          break;\\n      }\\n    }\\n  }\\n\\n  updateVisit(event) {\\n    // Update rule to filter for specified visit\\n    let rule = JSON.parse(JSON.stringify(this.props.rule));\\n    rule.visit = event.target.value;\\n\\n    if (event.target.value === 'all') {\\n      // If all visits, use keys of master list\\n      rule.session = Object.keys(rule.candidates.allCandiates);\\n    } else {\\n      // Else use list of PSCIDs for given vist\\n      rule.session = rule.candidates.allSessions[event.target.value];\\n    }\\n    this.props.updateSessions(this.props.index, rule);\\n  }\\n\\n  render() {\\n    // Renders the html for the component\\n\\n    let rule;\\n    let fieldIndex;\\n    let forVisits;\\n    let visits;\\n    if (this.props.rule.instrument) {\\n      // Only display field select and etc. if instrument is selected\\n      let fields = this.props.rule.fields.map((field, index) => {\\n        if (this.props.rule.field && field.key[1] === this.props.rule.field) {\\n          fieldIndex = index;\\n        }\\n        return (\\n          <option key={index} value={index}>{field.key[1]}</option>\\n        );\\n      });\\n      let operators = [];\\n      let inputOptions = [];\\n      let input = [];\\n      let operatorKey = '';\\n      let operatorSelect = [];\\n      let options = [];\\n      let value = '';\\n      let inputType = [];\\n\\n      if (this.props.rule.fieldType) {\\n        // Only display operators if field is selected\\n        inputType = this.props.rule.fieldType.split(\\\"(\\\");\\n        operatorKey = inputType[0]\\n        for (let key in this.state.operators) {\\n          operators.push(\\n            <option value={key} onChange={this.operatorSelect}>\\n              {this.state.operators[key]}\\n            </option>\\n          );\\n        }\\n        value = (this.props.rule.operator) ? this.props.rule.operator : \\\"\\\";\\n        operatorSelect = (\\n          <select className=\\\"input-sm col-xs-3 \\\" onChange={this.operatorSelect} value={value}>\\n            <option value=\\\"\\\"></option>\\n            {operators}\\n          </select>\\n        );\\n        if (this.props.rule.operator &&\\n          this.props.rule.operator !== 'isNull' &&\\n          this.props.rule.operator !== 'isNotNull'\\n        ) {\\n          // Only display value input if operator is selected, displaying specific\\n          // input type field data type\\n          switch (operatorKey) {\\n            case 'enum':\\n              inputOptions = enumToArray(this.props.rule.fieldType);\\n              options = inputOptions.map((option, index) => {\\n                return (\\n                  <option key={index} value={option}>\\n                    {option}\\n                  </option>\\n                );\\n              });\\n              value = (this.props.rule.value) ? this.props.rule.value : '';\\n              input = (\\n                <select className='input-sm col-xs-3' onChange={this.valueChange} value={value}>\\n                  <option value=''></option>\\n                  {options}\\n                </select>\\n              );\\n              break;\\n            default:\\n              input = (\\n                <input type='text'\\n                       className='input-sm col-xs-3'\\n                       onChange={this.valueChange}\\n                       value={this.props.rule.value}\\n                />\\n              );\\n              break;\\n          }\\n        }\\n        if (this.props.rule.visit) {\\n          // Display dropdown for visit select. This only displays after a value\\n          // has been inputed\\n          visits = Object.keys(this.props.Visits).map((visit, index) => {\\n            return (\\n              <option key={index} value={visit}>\\n                {visit}\\n              </option>\\n            );\\n          });\\n          forVisits = (\\n            <select className='input-sm col-xs-3' onChange={this.updateVisit} value={this.props.rule.visit}>\\n              <option value='all'>All Visits</option>\\n              {visits}\\n            </select>\\n          );\\n        }\\n      }\\n      rule = (\\n        <div>\\n          <div className='col-xs-12'>\\n            <label className='instrumentLabel'>{this.props.rule.instrument}</label>\\n          </div>\\n          <div className='col-xs-10'>\\n            <select className='input-sm col-xs-3' onChange={this.fieldSelect} value={fieldIndex}>\\n              <option value=''></option>\\n              {fields}\\n            </select>\\n            {operatorSelect}\\n            {input}\\n            {forVisits}\\n          </div>\\n        </div>\\n      );\\n    } else {\\n      // Else display dropdown for instrument select\\n      let options = this.props.items.map((item, index) => {\\n        return (\\n          <option key={index} value={item.category}>{item.category}</option>\\n        );\\n      });\\n      rule = (\\n        <select onChange={this.selectInstrument} className=\\\"input-sm col-xs-10\\\">\\n          <option value=''></option>\\n          {options}\\n        </select>\\n      )\\n    }\\n    return (\\n      <div className='panel panel-default'>\\n        <div className='panel-body'>\\n          {rule}\\n          <div className='col-xs-2'>\\n            <button className='btn btn-danger btn-sm pull-right'\\n                    onClick={this.props.deleteRule.bind(this, this.props.index)}\\n            >\\n              <span className='glyphicon glyphicon-remove'></span> Delete\\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n    );\\n  }\\n}\\n\\n/*\\n *  The following component is used for displaying a filter group\\n */\\nclass FilterGroup extends Component {\\n  constructor(props) {\\n    super(props);\\n    this.state = {};\\n    this.updateChild = this.updateChild.bind(this);\\n    this.updateGroupOperator = this.updateGroupOperator.bind(this);\\n    this.updateSessions = this.updateSessions.bind(this);\\n    this.addChild = this.addChild.bind(this);\\n    this.deleteChild = this.deleteChild.bind(this);\\n  }\\n\\n  updateChild(index, child) {\\n    // Update a specified child in the groups children\\n\\n    let group = this.props.group;\\n    group.children[index] = child;\\n\\n    if (this.props.index) {\\n      // If not base filter group, recursively call update child\\n      this.props.updateGroup(this.props.index, group);\\n    } else {\\n      // Else base filter group, update the filter in the data query component\\n      this.props.updateFilter(group);\\n    }\\n  }\\n\\n  updateGroupOperator(operator) {\\n    // Update the group's operator\\n    let group = this.props.group;\\n    group.activeOperator = operator;\\n\\n    // Update the groups sessions by calling the arrayintersect.js functions\\n    group.session = getSessions(group);\\n\\n    if (this.props.index) {\\n      // If not base filter group, recursively call update child\\n      this.props.updateGroup(this.props.index, group);\\n    } else {\\n      // Else base filter group, update the filter in the data query component\\n      this.props.updateFilter(group);\\n    }\\n  }\\n\\n  updateSessions(index, child) {\\n    // Computes the desired sessions of the current group\\n    let group = this.props.group,\\n      sessions = [],\\n      session = [];\\n    group.children[index] = child;\\n\\n    // Update the groups sessions by calling the arrayintersect.js functions\\n    group.session = getSessions(group);\\n    if (this.props.index) {\\n      // If not base filter group, recursively call update parents session\\n      this.props.updateSessions(this.props.index, group);\\n    } else {\\n      // Else base filter group, update the filter in the data query component\\n      this.props.updateFilter(group)\\n    }\\n  }\\n\\n  addChild(type) {\\n    // Add a child to the group\\n    let child,\\n      group = this.props.group;\\n\\n    // Define the child's base data structure depending on specifed type\\n    if (type === 'rule') {\\n      child = {\\n        type: 'rule'\\n      }\\n    } else {\\n      child = {\\n        type: 'group',\\n        activeOperator: 0,\\n        children: [\\n          {\\n            type: 'rule'\\n          }\\n        ]\\n      }\\n    }\\n    group.children.push(child);\\n\\n    if (this.props.index) {\\n      // If not base filter group, recursively call update child\\n      this.props.updateGroup(this.props.index, group);\\n    } else {\\n      // Else base filter group, update the filter in the data query component\\n      this.props.updateFilter(group)\\n    }\\n  }\\n\\n  deleteChild(index) {\\n    // Delete a child\\n\\n    let group = this.props.group;\\n    group.children.splice(index, 1);\\n\\n    // Update the groups sessions by calling the arrayintersect.js functions\\n    group.session = getSessions(group);\\n\\n\\n    if (this.props.index) {\\n      // If not base filter group, recursively call update child\\n      this.props.updateGroup(this.props.index, group);\\n    } else {\\n      // Else base filter group, update the filter in the data query component\\n      this.props.updateFilter(group);\\n    }\\n  }\\n\\n  render() {\\n    // Renders the html for the component\\n    let logicOperator = (\\n      <LogicOperator\\n        logicOperator={this.props.group.activeOperator}\\n        updateGroupOperator={this.updateGroupOperator}\\n      />\\n    );\\n\\n    // Render the children based on their type\\n    let children = this.props.group.children.map((child, index) => {\\n      if (child.type === 'rule') {\\n        return (\\n          <li key={index}>\\n            <FilterRule rule={child}\\n                        items={this.props.items}\\n                        index={index}\\n                        updateRule={this.updateChild}\\n                        updateSessions={this.updateSessions}\\n                        deleteRule={this.deleteChild}\\n                        Visits={this.props.Visits}\\n            />\\n          </li>\\n        );\\n      } else if (child.type === 'group') {\\n        return (\\n          <li key={index}>\\n            <FilterGroup group={child}\\n                         items={this.props.items}\\n                         index={index}\\n                         updateGroup={this.updateChild}\\n                         updateSessions={this.updateSessions}\\n                         deleteGroup={this.deleteChild}\\n                         Visits={this.props.Visits}\\n            />\\n          </li>\\n        );\\n      }\\n    });\\n\\n    let deleteButton;\\n\\n    if (this.props.deleteGroup) {\\n      // Can only delete a group that isn't the base group\\n      deleteButton = (\\n        <button\\n          className='btn btn-danger btn-sm pull-right'\\n          onClick={this.props.deleteGroup.bind(this, this.props.index)}\\n        >\\n          <span className='glyphicon glyphicon-remove'></span> Delete Group\\n        </button>\\n      );\\n    }\\n    return (\\n      <div className='tree'>\\n        <ul className='firstUL'>\\n          <li>\\n            <div className='row'>\\n              <div className='col-xs-2'>\\n                {logicOperator}\\n              </div>\\n              <div className='col-xs-10'>\\n                {deleteButton}\\n                <button className='btn btn-primary btn-sm pull-right'\\n                        onClick={this.addChild.bind(this, 'group')}\\n                >\\n                  <span className='glyphicon glyphicon-add'></span> Add Group\\n                </button>\\n                <button className='btn btn-primary btn-sm pull-right'\\n                        onClick={this.addChild.bind(this, 'rule')}\\n                >\\n                  <span className='glyphicon glyphicon-add'></span> Add Rule\\n                </button>\\n              </div>\\n            </div>\\n            <ul>\\n              {children}\\n            </ul>\\n          </li>\\n        </ul>\\n      </div>\\n    );\\n  }\\n}\\n\\n/*\\n *  The following component is the base componenet for the filter builder\\n */\\nclass FilterBuilder extends Component {\\n  constructor(props) {\\n    super(props);\\n    this.state = {};\\n  }\\n\\n  render() {\\n    return (\\n      <div>\\n        <h1 className='col-xs-12'>Filter</h1>\\n        <div className='col-xs-12'>\\n          <div className='well well-primary'>\\n            <FilterGroup group={this.props.filter}\\n                         items={this.props.items}\\n                         updateFilter={this.props.updateFilter}\\n                         Visits={this.props.Visits}\\n            />\\n          </div>\\n        </div>\\n      </div>\\n    );\\n  }\\n}\\n\\nwindow.LogicOperator = LogicOperator;\\nwindow.FilterRule = FilterRule;\\nwindow.FilterGroup = FilterGroup;\\nwindow.FilterBuilder = FilterBuilder;\\n\\nexport default {\\n  LogicOperator,\\n  FilterRule,\\n  FilterGroup,\\n  FilterBuilder\\n};\\n\"]}","code":"(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!==\"undefined\"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:\"Module\"})}Object.defineProperty(exports,\"__esModule\",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value===\"object\"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,\"default\",{enumerable:true,value});if(mode&2&&typeof value!=\"string\")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module[\"default\"]}:function getModuleExports(){return module};__webpack_require__.d(getter,\"a\",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p=\"\";return __webpack_require__(__webpack_require__.s=53)})({0:function(module,exports){module.exports=React},53:function(module,exports,__webpack_require__){\"use strict\";var _typeof=typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj};Object.defineProperty(exports,\"__esModule\",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return call&&((typeof call===\"undefined\"?\"undefined\":_typeof(call))===\"object\"||typeof call===\"function\")?call:self}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+(typeof superClass===\"undefined\"?\"undefined\":_typeof(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}\n/**\n   *  The following file contains the components used for the filter builder tab\n   *\n   *  @author   Jordan Stirling <jstirling91@gmail.com>\n   *  @license  http://www.gnu.org/licenses/gpl-3.0.txt GPLv3\n   *  @link     https://github.com/mohadesz/Loris-Trunk\n   */var LogicOperator=function(_Component){_inherits(LogicOperator,_Component);function LogicOperator(props){_classCallCheck(this,LogicOperator);var _this=_possibleConstructorReturn(this,(LogicOperator.__proto__||Object.getPrototypeOf(LogicOperator)).call(this,props));_this.changeOperator=_this.changeOperator.bind(_this);return _this}_createClass(LogicOperator,[{key:\"changeOperator\",value:function changeOperator(op){this.props.updateGroupOperator(op)}},{key:\"render\",value:function render(){var andClass=\"btn\",orClass=\"btn\";if(this.props.logicOperator===1){orClass+=\" btn-primary\";andClass+=\" switch\"}else{andClass+=\" btn-primary\";orClass+=\" switch\"}return _react2.default.createElement(\"div\",{className:\"btn-group\",role:\"group\"},_react2.default.createElement(\"button\",{type:\"button\",className:andClass,onClick:this.changeOperator.bind(this,0)},\"And\"),_react2.default.createElement(\"button\",{type:\"button\",className:orClass,onClick:this.changeOperator.bind(this,1)},\"Or\"))}}]);return LogicOperator}(_react.Component);var FilterRule=function(_Component2){_inherits(FilterRule,_Component2);function FilterRule(props){_classCallCheck(this,FilterRule);var _this2=_possibleConstructorReturn(this,(FilterRule.__proto__||Object.getPrototypeOf(FilterRule)).call(this,props));_this2.state={operators:{equal:\"=\",notEqual:\"!=\",lessThanEqual:\"<=\",greaterThanEqual:\">=\",startsWith:\"startsWith\",contains:\"contains\",isNull:\"isNull\",isNotNull:\"isNotNull\"},value:\"\"};_this2.selectInstrument=_this2.selectInstrument.bind(_this2);_this2.fieldSelect=_this2.fieldSelect.bind(_this2);_this2.operatorSelect=_this2.operatorSelect.bind(_this2);_this2.valueChange=_this2.valueChange.bind(_this2);_this2.valueSet=_this2.valueSet.bind(_this2);_this2.updateVisit=_this2.updateVisit.bind(_this2);return _this2}_createClass(FilterRule,[{key:\"componentWillMount\",value:function componentWillMount(){this.valueSet=loris.debounce(this.valueSet,1e3)}},{key:\"selectInstrument\",value:function selectInstrument(event){var _this3=this;var rule=this.props.rule;if(event.target.value){rule.instrument=event.target.value;$.get(loris.BaseURL+\"/dataquery/ajax/datadictionary.php\",{category:rule.instrument},function(data){rule.fields=data;_this3.props.updateRule(_this3.props.index,rule)},\"json\")}}},{key:\"fieldSelect\",value:function fieldSelect(event){var rule=JSON.parse(JSON.stringify(this.props.rule));delete rule.field;delete rule.fieldType;delete rule.operator;delete rule.value;delete rule.visit;delete rule.candidates;if(event.target.value){rule.field=rule.fields[event.target.value].key[1];rule.fieldType=rule.fields[event.target.value].value.Type}this.props.updateRule(this.props.index,rule)}},{key:\"operatorSelect\",value:function operatorSelect(event){var rule=JSON.parse(JSON.stringify(this.props.rule));delete rule.operator;delete rule.value;delete rule.visit;delete rule.candidates;if(event.target.value){rule.operator=event.target.value}this.props.updateRule(this.props.index,rule);if(rule.operator===\"isNull\"||rule.operator===\"isNotNull\"){this.setState({value:\"null\"});this.valueSet()}}},{key:\"valueChange\",value:function valueChange(event){var rule=JSON.parse(JSON.stringify(this.props.rule));delete rule.visit;delete rule.candidates;rule.value=event.target.value;this.setState({value:event.target.value});this.valueSet();this.props.updateRule(this.props.index,rule)}},{key:\"valueSet\",value:function valueSet(){var _this4=this;var rule=JSON.parse(JSON.stringify(this.props.rule));if(this.state.value){var responseHandler=function responseHandler(data){var i=void 0;var allSessions={};var allCandiates={};for(i=0;i<data.length;i++){if(!allSessions[data[i][1]]){allSessions[data[i][1]]=[]}allSessions[data[i][1]].push(data[i][0]);if(!allCandiates[data[i][0]]){allCandiates[data[i][0]]=[]}allCandiates[data[i][0]].push(data[i][1])}rule.candidates={allCandiates,allSessions};rule.session=Object.keys(allCandiates);rule.visit=\"All\";_this4.props.updateSessions(_this4.props.index,rule)};var ajaxRetrieve=function ajaxRetrieve(script){$.get(loris.BaseURL+\"/dataquery/ajax/\"+script,{category:rule.instrument,field:rule.field,value:_this4.state.value},responseHandler,\"json\")};switch(rule.operator){case\"equal\":case\"isNull\":ajaxRetrieve(\"queryEqual.php\");break;case\"notEqual\":case\"isNotNull\":ajaxRetrieve(\"queryNotEqual.php\");break;case\"lessThanEqual\":ajaxRetrieve(\"queryLessThanEqual.php\");break;case\"greaterThanEqual\":ajaxRetrieve(\"queryGreaterThanEqual.php\");break;case\"startsWith\":ajaxRetrieve(\"queryStartsWith.php\");break;case\"contains\":ajaxRetrieve(\"queryContains.php\");break;default:break}}}},{key:\"updateVisit\",value:function updateVisit(event){var rule=JSON.parse(JSON.stringify(this.props.rule));rule.visit=event.target.value;if(event.target.value===\"all\"){rule.session=Object.keys(rule.candidates.allCandiates)}else{rule.session=rule.candidates.allSessions[event.target.value]}this.props.updateSessions(this.props.index,rule)}},{key:\"render\",value:function render(){var _this5=this;var rule=void 0;var fieldIndex=void 0;var forVisits=void 0;var visits=void 0;if(this.props.rule.instrument){var fields=this.props.rule.fields.map(function(field,index){if(_this5.props.rule.field&&field.key[1]===_this5.props.rule.field){fieldIndex=index}return _react2.default.createElement(\"option\",{key:index,value:index},field.key[1])});var operators=[];var inputOptions=[];var input=[];var operatorKey=\"\";var operatorSelect=[];var options=[];var value=\"\";var inputType=[];if(this.props.rule.fieldType){inputType=this.props.rule.fieldType.split(\"(\");operatorKey=inputType[0];for(var key in this.state.operators){operators.push(_react2.default.createElement(\"option\",{value:key,onChange:this.operatorSelect},this.state.operators[key]))}value=this.props.rule.operator?this.props.rule.operator:\"\";operatorSelect=_react2.default.createElement(\"select\",{className:\"input-sm col-xs-3 \",onChange:this.operatorSelect,value},_react2.default.createElement(\"option\",{value:\"\"}),operators);if(this.props.rule.operator&&this.props.rule.operator!==\"isNull\"&&this.props.rule.operator!==\"isNotNull\"){switch(operatorKey){case\"enum\":inputOptions=enumToArray(this.props.rule.fieldType);options=inputOptions.map(function(option,index){return _react2.default.createElement(\"option\",{key:index,value:option},option)});value=this.props.rule.value?this.props.rule.value:\"\";input=_react2.default.createElement(\"select\",{className:\"input-sm col-xs-3\",onChange:this.valueChange,value},_react2.default.createElement(\"option\",{value:\"\"}),options);break;default:input=_react2.default.createElement(\"input\",{type:\"text\",className:\"input-sm col-xs-3\",onChange:this.valueChange,value:this.props.rule.value});break}}if(this.props.rule.visit){visits=Object.keys(this.props.Visits).map(function(visit,index){return _react2.default.createElement(\"option\",{key:index,value:visit},visit)});forVisits=_react2.default.createElement(\"select\",{className:\"input-sm col-xs-3\",onChange:this.updateVisit,value:this.props.rule.visit},_react2.default.createElement(\"option\",{value:\"all\"},\"All Visits\"),visits)}}rule=_react2.default.createElement(\"div\",null,_react2.default.createElement(\"div\",{className:\"col-xs-12\"},_react2.default.createElement(\"label\",{className:\"instrumentLabel\"},this.props.rule.instrument)),_react2.default.createElement(\"div\",{className:\"col-xs-10\"},_react2.default.createElement(\"select\",{className:\"input-sm col-xs-3\",onChange:this.fieldSelect,value:fieldIndex},_react2.default.createElement(\"option\",{value:\"\"}),fields),operatorSelect,input,forVisits))}else{var _options=this.props.items.map(function(item,index){return _react2.default.createElement(\"option\",{key:index,value:item.category},item.category)});rule=_react2.default.createElement(\"select\",{onChange:this.selectInstrument,className:\"input-sm col-xs-10\"},_react2.default.createElement(\"option\",{value:\"\"}),_options)}return _react2.default.createElement(\"div\",{className:\"panel panel-default\"},_react2.default.createElement(\"div\",{className:\"panel-body\"},rule,_react2.default.createElement(\"div\",{className:\"col-xs-2\"},_react2.default.createElement(\"button\",{className:\"btn btn-danger btn-sm pull-right\",onClick:this.props.deleteRule.bind(this,this.props.index)},_react2.default.createElement(\"span\",{className:\"glyphicon glyphicon-remove\"}),\" Delete\"))))}}]);return FilterRule}(_react.Component);var FilterGroup=function(_Component3){_inherits(FilterGroup,_Component3);function FilterGroup(props){_classCallCheck(this,FilterGroup);var _this6=_possibleConstructorReturn(this,(FilterGroup.__proto__||Object.getPrototypeOf(FilterGroup)).call(this,props));_this6.state={};_this6.updateChild=_this6.updateChild.bind(_this6);_this6.updateGroupOperator=_this6.updateGroupOperator.bind(_this6);_this6.updateSessions=_this6.updateSessions.bind(_this6);_this6.addChild=_this6.addChild.bind(_this6);_this6.deleteChild=_this6.deleteChild.bind(_this6);return _this6}_createClass(FilterGroup,[{key:\"updateChild\",value:function updateChild(index,child){var group=this.props.group;group.children[index]=child;if(this.props.index){this.props.updateGroup(this.props.index,group)}else{this.props.updateFilter(group)}}},{key:\"updateGroupOperator\",value:function updateGroupOperator(operator){var group=this.props.group;group.activeOperator=operator;group.session=getSessions(group);if(this.props.index){this.props.updateGroup(this.props.index,group)}else{this.props.updateFilter(group)}}},{key:\"updateSessions\",value:function updateSessions(index,child){var group=this.props.group,sessions=[],session=[];group.children[index]=child;group.session=getSessions(group);if(this.props.index){this.props.updateSessions(this.props.index,group)}else{this.props.updateFilter(group)}}},{key:\"addChild\",value:function addChild(type){var child=void 0,group=this.props.group;if(type===\"rule\"){child={type:\"rule\"}}else{child={type:\"group\",activeOperator:0,children:[{type:\"rule\"}]}}group.children.push(child);if(this.props.index){this.props.updateGroup(this.props.index,group)}else{this.props.updateFilter(group)}}},{key:\"deleteChild\",value:function deleteChild(index){var group=this.props.group;group.children.splice(index,1);group.session=getSessions(group);if(this.props.index){this.props.updateGroup(this.props.index,group)}else{this.props.updateFilter(group)}}},{key:\"render\",value:function render(){var _this7=this;var logicOperator=_react2.default.createElement(LogicOperator,{logicOperator:this.props.group.activeOperator,updateGroupOperator:this.updateGroupOperator});var children=this.props.group.children.map(function(child,index){if(child.type===\"rule\"){return _react2.default.createElement(\"li\",{key:index},_react2.default.createElement(FilterRule,{rule:child,items:_this7.props.items,index,updateRule:_this7.updateChild,updateSessions:_this7.updateSessions,deleteRule:_this7.deleteChild,Visits:_this7.props.Visits}))}else if(child.type===\"group\"){return _react2.default.createElement(\"li\",{key:index},_react2.default.createElement(FilterGroup,{group:child,items:_this7.props.items,index,updateGroup:_this7.updateChild,updateSessions:_this7.updateSessions,deleteGroup:_this7.deleteChild,Visits:_this7.props.Visits}))}});var deleteButton=void 0;if(this.props.deleteGroup){deleteButton=_react2.default.createElement(\"button\",{className:\"btn btn-danger btn-sm pull-right\",onClick:this.props.deleteGroup.bind(this,this.props.index)},_react2.default.createElement(\"span\",{className:\"glyphicon glyphicon-remove\"}),\" Delete Group\")}return _react2.default.createElement(\"div\",{className:\"tree\"},_react2.default.createElement(\"ul\",{className:\"firstUL\"},_react2.default.createElement(\"li\",null,_react2.default.createElement(\"div\",{className:\"row\"},_react2.default.createElement(\"div\",{className:\"col-xs-2\"},logicOperator),_react2.default.createElement(\"div\",{className:\"col-xs-10\"},deleteButton,_react2.default.createElement(\"button\",{className:\"btn btn-primary btn-sm pull-right\",onClick:this.addChild.bind(this,\"group\")},_react2.default.createElement(\"span\",{className:\"glyphicon glyphicon-add\"}),\" Add Group\"),_react2.default.createElement(\"button\",{className:\"btn btn-primary btn-sm pull-right\",onClick:this.addChild.bind(this,\"rule\")},_react2.default.createElement(\"span\",{className:\"glyphicon glyphicon-add\"}),\" Add Rule\"))),_react2.default.createElement(\"ul\",null,children))))}}]);return FilterGroup}(_react.Component);var FilterBuilder=function(_Component4){_inherits(FilterBuilder,_Component4);function FilterBuilder(props){_classCallCheck(this,FilterBuilder);var _this8=_possibleConstructorReturn(this,(FilterBuilder.__proto__||Object.getPrototypeOf(FilterBuilder)).call(this,props));_this8.state={};return _this8}_createClass(FilterBuilder,[{key:\"render\",value:function render(){return _react2.default.createElement(\"div\",null,_react2.default.createElement(\"h1\",{className:\"col-xs-12\"},\"Filter\"),_react2.default.createElement(\"div\",{className:\"col-xs-12\"},_react2.default.createElement(\"div\",{className:\"well well-primary\"},_react2.default.createElement(FilterGroup,{group:this.props.filter,items:this.props.items,updateFilter:this.props.updateFilter,Visits:this.props.Visits}))))}}]);return FilterBuilder}(_react.Component);window.LogicOperator=LogicOperator;window.FilterRule=FilterRule;window.FilterGroup=FilterGroup;window.FilterBuilder=FilterBuilder;exports.default={LogicOperator,FilterRule,FilterGroup,FilterBuilder}}});","extractedComments":[]}