{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"React\"","webpack:///./node_modules/prop-types/index.js","webpack:///./jsx/FilterForm.js","webpack:///./node_modules/prop-types/factoryWithThrowingShims.js","webpack:///./modules/publication/jsx/projectFields.js","webpack:///./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack:///./jsx/Tabs.js","webpack:///./jsx/Panel.js","webpack:///./modules/publication/jsx/publicationIndex.js","webpack:///./modules/publication/jsx/uploadForm.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","React","throwOnDirectAccess","isValidElement","REACT_ELEMENT_TYPE","_react","_propTypes","_Panel","FilterForm","props","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","clearFilter","getFormChildren","setFilter","onElementUpdate","queryString","QueryString","filter","filterKey","exactMatch","onUpdate","Module","formChildren","child","type","onUserInput","callbackFunc","callbackName","elementName","displayName","queryFieldName","filterValue","_react2","default","cloneElement","JSON","fieldName","fieldValue","_typeof","formElements","createElement","_Panel2","id","height","title","FormElement","Component","console","PropTypes","isRequired","string","func","ReactPropTypesSecret","emptyFunction","shim","propName","componentName","location","propFullName","secret","err","Error","getShim","ReactPropTypes","array","bool","number","symbol","any","arrayOf","element","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","EmailElement","handleChange","handleBlur","e","onUserBlur","disabled","required","errorMessage","requiredHTML","elementClass","className","htmlFor","label","onChange","onBlur","toggleEmailNotify","addressee","ProjectFormFields","_this2","createCollabEmailFields","deleteUpload","createFileFields","addCollaborator","removeCollaborator","setCollaboratorEmail","uploadID","self","swal","text","showCancelButton","confirmButtonText","cancelButtonText","willDelete","url","loris","$","method","success","fileFields","files","forEach","f","_this3","downloadURL","encodeURIComponent","URL","link","href","style","cursor","onClick","PublicationUploadID","existFileFlag","pubType","pubCit","pubVer","pubTypeStr","uploadTypes","formData","StaticElement","TextboxElement","setFormData","numFiles","fileName","FileElement","setFileData","publicationType","publicationCitation","publicationVersion","SelectElement","options","collabEmails","collaborators","validateEmail","formErrors","email","formElement","pendingValKey","notify","collabName","findIndex","currNotify","notifyLead","voiHelp","collabNames","map","voiTypeOptions","All","Behavioral","Imaging","allVOIs","voiOptions","voiType","bvlCopy","TextareaElement","description","leadInvestigator","leadInvestigatorEmail","TagsElement","users","useSearch","strictSearch","onUserAdd","addListItem","onUserRemove","removeListItem","pendingUWEP","items","usersWithEditPerm","btnLabel","allCollabs","pendingCollab","allKWs","pendingKWItem","keywords","emptyOption","pendingItemVF","voiFields","ButtonElement","editMode","Tabs","hash","window","activeTab","updateURL","defaultTab","tabs","length","state","handleClick","getTabs","getTabPanes","tabId","setState","onTabChange","scrollDistance","scrollTop","tab","tabClass","tabID","role","data-toggle","tabPanes","Children","children","tabStyle","marginLeft","marginBottom","VerticalTabs","TabPane","classList","TabId","Title","Panel","collapsed","initCollapsed","panelClass","toggleCollapsed","glyphClass","panelHeading","data-target","_FilterForm","_Tabs","_uploadForm","PublicationIndex","isLoaded","fetchData","updateFilter","resetFilters","dataType","data","Data","error","_error","publicationsFilter","tabList","proposalTab","_uploadForm2","DataURL","BaseURL","action","filterRef","_FilterForm2","ref","columns","form","StaticDataTable","Headers","Filter","getFormattedCell","formatColumn","column","cell","rowData","rowHeaders","row","header","index","classes","pubID","viewURL","publicationIndex","ReactDOM","document","_projectFields","PublicationUploadForm","uploadResult","loadError","undefined","loadedData","uploadProgress","handleSubmit","field","test","errorCode","errorMsg","listItems","formObj","FormData","formVal","Array","cache","contentType","processData","jqXHR","resp","createElements","formClass","onSubmit","fileUpload","_projectFields2"],"mappings":"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","file":"./modules/publication/js/publicationIndex.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 91);\n","module.exports = React;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var REACT_ELEMENT_TYPE = (typeof Symbol === 'function' &&\n    Symbol.for &&\n    Symbol.for('react.element')) ||\n    0xeac7;\n\n  var isValidElement = function(object) {\n    return typeof object === 'object' &&\n      object !== null &&\n      object.$$typeof === REACT_ELEMENT_TYPE;\n  };\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(isValidElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * This file contains React component for FilterForm\n *\n * @author Loris Team\n * @version 1.1.0\n *\n */\nimport React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport Panel from 'Panel';\n\n/**\n * FilterForm component.\n * A wrapper for form elements inside a selection filter.\n *\n * Adds necessary filter callbacks to all children and passes them to FormElement\n * for proper rendering.\n *\n * Keeps track of filter object and sends it to parent on every update.\n *\n * //HACK/NOTE: Loris has special behaviour for `candID` attribute in the query string,\n * making it impossible to use it for selection filters. This components renames\n * all `candID` fields to `candidateID` automatically before appending them to URL.\n *\n */\nclass FilterForm extends Component {\n  constructor(props) {\n    super(props);\n\n    // Bind component instance to custom methods\n    this.clearFilter = this.clearFilter.bind(this);\n    this.getFormChildren = this.getFormChildren.bind(this);\n    this.setFilter = this.setFilter.bind(this);\n    this.onElementUpdate = this.onElementUpdate.bind(this);\n\n    // Keeps track of querystring values\n    // Saved as class variable instead of keeping in state\n    this.queryString = QueryString.get();\n  }\n\n  componentDidMount() {\n    let filter = {};\n    let queryString = this.queryString;\n\n    // Initiaze filter using querystring value\n    Object.keys(queryString).forEach(function(key) {\n      let filterKey = (key === 'candidateID') ? 'candID' : key;\n      filter[filterKey] = {\n        value: queryString[key],\n        exactMatch: false,\n      };\n    });\n\n    // Update parent component\n    this.props.onUpdate(filter);\n  }\n\n  /**\n   * Clear the filter object, querystring and input fields\n   */\n  clearFilter() {\n    this.queryString = QueryString.clear(this.props.Module);\n    this.props.onUpdate({});\n  }\n\n  /**\n   * Iterates through FilterForm children, sets necessary callback functions\n   * and initializes filterTable\n   *\n   * @return {Array} formChildren - array of children with necessary props\n   */\n  getFormChildren() {\n    let formChildren = [];\n    React.Children.forEach(this.props.children, function(child, key) {\n      // If child is a React component (i.e not a simple DOM element)\n      if (React.isValidElement(child) &&\n        typeof child.type === 'function' &&\n        child.props.onUserInput\n      ) {\n        let callbackFunc = child.props.onUserInput;\n        let callbackName = callbackFunc.name;\n        let elementName = child.type.displayName;\n        let queryFieldName = (child.props.name === 'candID') ? 'candidateID' : child.props.name;\n        let filterValue = this.queryString[queryFieldName];\n        // If callback function was not set, set it to onElementUpdate() for form\n        // elements and to clearFilter() for <ButtonElement type='reset'/>.\n        if (callbackName === 'onUserInput') {\n          if (elementName === 'ButtonElement' && child.props.type === 'reset') {\n            callbackFunc = this.clearFilter;\n          } else {\n            callbackFunc = this.onElementUpdate.bind(null, elementName);\n          }\n        }\n        // Pass onUserInput and value props to all children\n        formChildren.push(React.cloneElement(child, {\n          onUserInput: callbackFunc,\n          value: filterValue ? filterValue : '',\n          key: key,\n        }));\n        // Initialize filter for StaticDataTable\n        this.setFilter(elementName, child.props.name, filterValue);\n      } else {\n        formChildren.push(React.cloneElement(child, {key: key}));\n      }\n    }.bind(this));\n\n    return formChildren;\n  }\n\n  /**\n   * Appends entry to filter object or deletes it if value is\n   * empty.\n   *\n   * Sets exactMatch to true for all SelectElements (i.e dropdowns)\n   * in order to force StaticDataTable to do exact comparaison\n   *\n   * @param {string} type - form element type (i.e component name)\n   * @param {string} key - the name of the form element\n   * @param {string} value - the value of the form element\n   *\n   * @return {{}} filter - filterData\n   */\n  setFilter(type, key, value) {\n    let filter = {};\n    if (this.props.filter) {\n      filter = JSON.parse(JSON.stringify(this.props.filter));\n    }\n    if (key) {\n      filter[key] = {};\n      if (value) { // all defined/non-null values must have some length, else empty string\n        filter[key].value = Object.keys(value).length > 0 ? value : '';\n      } else { // null and undefined handled here\n        filter[key].value = '';\n      }\n      filter[key].exactMatch = (type === 'SelectElement' || type === 'select');\n    }\n    if (filter && key && value === '') {\n      delete filter[key];\n    }\n    return filter;\n  }\n\n  /**\n   * Sets filter object and querystring to reflect values of input fields\n   *\n   * @param {string} type - form element type (i.e component name)\n   * @param {string} fieldName - the name of the form element\n   * @param {string} fieldValue - the value of the form element\n   */\n  onElementUpdate(type, fieldName, fieldValue) {\n    // Make sure key is of string type and value is of string or object type\n    // before sending them to querystring\n    if (typeof fieldName !== 'string' ||\n        (typeof fieldValue !== 'string' && typeof fieldValue !== 'object')) {\n      return;\n    }\n\n    // Update query string\n    let queryFieldName = (fieldName === 'candID') ? 'candidateID' : fieldName;\n    this.queryString = QueryString.set(this.queryString, queryFieldName, fieldValue);\n\n    // Update filter and get new filter object\n    let filter = this.setFilter(type, fieldName, fieldValue);\n    this.props.onUpdate(filter);\n  }\n\n  render() {\n    // Get formatted children\n    let formChildren = this.getFormChildren();\n    let formElements = this.props.formElements;\n\n    if (formElements) {\n      Object.keys(formElements).forEach(function(fieldName) {\n        let queryFieldName = (fieldName === 'candID') ? 'candidateID' : fieldName;\n        formElements[fieldName].onUserInput = this.onElementUpdate.bind(null, formElements[fieldName].type);\n        formElements[fieldName].value = this.queryString[queryFieldName];\n      }.bind(this));\n    }\n\n    return (\n      <Panel\n        id={this.props.id}\n        height={this.props.height}\n        title={this.props.title}\n      >\n        <FormElement {...this.props}>\n          {formChildren}\n        </FormElement>\n      </Panel>\n    );\n  }\n}\n\nFilterForm.defaultProps = {\n  id: 'selection-filter',\n  height: '100%',\n  title: 'Selection Filter',\n  onUpdate: function() {\n    console.warn('onUpdate() callback is not set!');\n  },\n};\nFilterForm.propTypes = {\n  Module: PropTypes.string.isRequired,\n  filter: PropTypes.object.isRequired,\n  id: PropTypes.string,\n  height: PropTypes.string,\n  title: PropTypes.string,\n  onUpdate: PropTypes.func,\n};\n\nexport default FilterForm;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim\n  };\n\n  ReactPropTypes.checkPropTypes = emptyFunction;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","class EmailElement extends React.Component {\n  constructor() {\n    super();\n    this.handleChange = this.handleChange.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n  }\n\n  handleChange(e) {\n    this.props.onUserInput(this.props.name, e.target.value);\n  }\n\n  handleBlur(e) {\n    this.props.onUserBlur(this.props.name, e.target.value);\n  }\n\n  render() {\n    let disabled = this.props.disabled ? 'disabled' : null;\n    let required = this.props.required ? 'required' : null;\n    let errorMessage = null;\n    let requiredHTML = null;\n    let elementClass = 'row form-group';\n\n    // Add required asterix\n    if (required) {\n      requiredHTML = <span className=\"text-danger\">*</span>;\n    }\n\n    // Add error message\n    if (this.props.errorMessage) {\n      errorMessage = <span>{this.props.errorMessage}</span>;\n      elementClass = 'row form-group has-error';\n    }\n\n    return (\n      <div className={elementClass}>\n        <label className=\"col-sm-3 control-label\" htmlFor={this.props.id}>\n          {this.props.label}\n          {requiredHTML}\n        </label>\n        <div className=\"col-sm-7\">\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            name={this.props.name}\n            id={this.props.id}\n            value={this.props.value || ''}\n            required={required}\n            disabled={disabled}\n            onChange={this.handleChange}\n            onBlur={this.handleBlur}\n          />\n          {errorMessage}\n        </div>\n        <div className=\"col-sm-2\">\n        <span>\n          <input\n            name={this.props.name + '_notify'}\n            type=\"checkbox\"\n            onChange={this.props.toggleEmailNotify}\n            value={this.props.addressee}\n          />\n          <span>Send email notification?</span>\n        </span>\n        </div>\n      </div>\n    );\n  }\n}\n\nEmailElement.defaultProps = {\n  name: '',\n  label: '',\n  value: '',\n  addressee: '',\n  id: null,\n  disabled: false,\n  required: false,\n  errorMessage: '',\n  onUserInput: function() {\n    console.warn('onUserInput() callback is not set');\n  },\n  onUserBlur: function() {\n  },\n};\n\n// This class combines the common form elements between\n// Edit mode and initial Project Proposal/Creation mode\nclass ProjectFormFields extends React.Component {\n  constructor() {\n    super();\n    this.createCollabEmailFields = this.createCollabEmailFields.bind(this);\n    this.deleteUpload = this.deleteUpload.bind(this);\n    this.createFileFields = this.createFileFields.bind(this);\n    this.addCollaborator = this.addCollaborator.bind(this);\n    this.removeCollaborator = this.removeCollaborator.bind(this);\n    this.setCollaboratorEmail = this.setCollaboratorEmail.bind(this);\n    this.toggleEmailNotify = this.toggleEmailNotify.bind(this);\n  }\n\n  deleteUpload(uploadID) {\n    let self = this;\n    swal({\n      title: 'Are you sure?',\n      text: 'Are you sure you want to delete this file?',\n      type: 'warning',\n      showCancelButton: true,\n      confirmButtonText: 'Yes, I am sure!',\n      cancelButtonText: 'No, cancel it!',\n    },\n      function(willDelete) {\n        if (willDelete) {\n          let url = loris.BaseURL + '/publication/ajax/FileDelete.php?uploadID=' + uploadID;\n          $.ajax(\n            url,\n            {\n              method: 'DELETE',\n              success: function() {\n                self.props.fetchData();\n              },\n            });\n        }\n      });\n  }\n\n  createFileFields() {\n    let fileFields = [];\n    // Create download link & edit fields for existing files\n    if (this.props.files) {\n      this.props.files.forEach(function(f) {\n        let downloadURL = loris.BaseURL + '/publication/ajax/FileDownload.php?File=' + encodeURIComponent(f.URL);\n        let link = (\n          <span>\n            <a href={downloadURL}>{f.URL}</a>\n            &nbsp;&nbsp;\n            <span\n              className=\"glyphicon glyphicon-remove\"\n              style={{cursor: 'pointer'}}\n              onClick={() => this.deleteUpload(f.PublicationUploadID)}\n            />\n          </span>\n        );\n        let existFileFlag = 'existingUpload_';\n        let pubType = existFileFlag + 'publicationType_' + f.PublicationUploadID;\n        let pubCit = existFileFlag + 'publicationCitation_' + f.PublicationUploadID;\n        let pubVer = existFileFlag + 'publicationVersion_' + f.PublicationUploadID;\n        let pubTypeStr = this.props.uploadTypes[this.props.formData[pubType]];\n        fileFields.push(\n          <div>\n            <StaticElement\n              label={pubTypeStr}\n              text={link}\n            />\n            <TextboxElement\n              name={pubCit}\n              label=\"Citation\"\n              onUserInput={this.props.setFormData}\n              value={this.props.formData[pubCit]}\n            />\n            <TextboxElement\n              name={pubVer}\n              label=\"Publication Version\"\n              onUserInput={this.props.setFormData}\n              value={this.props.formData[pubVer]}\n            />\n          </div>\n        );\n      }, this);\n    }\n    // create fields for new files\n    for (let i = 0; i <= this.props.numFiles; i++) {\n      let fileName = 'file_' + i;\n      fileFields.push(\n        <FileElement\n          name={fileName}\n          id={'publicationUploadEl_' + i}\n          onUserInput={this.props.setFileData}\n          label=\"File to upload\"\n          value={this.props.formData[fileName]}\n        />\n      );\n      if (this.props.formData[fileName]) {\n        let publicationType = 'publicationType_' + i;\n        let publicationCitation = 'publicationCitation_' + i;\n        let publicationVersion = 'publicationVersion_' + i;\n        fileFields.push(\n          <div>\n            <SelectElement\n              name={publicationType}\n              label=\"Publication Type\"\n              onUserInput={this.props.setFormData}\n              value={this.props.formData[publicationType]}\n              options={this.props.uploadTypes}\n              required={true}\n            />\n            <TextboxElement\n              name={publicationCitation}\n              label=\"Citation\"\n              onUserInput={this.props.setFormData}\n              value={this.props.formData[publicationCitation]}\n            />\n            <TextboxElement\n              name={publicationVersion}\n              label=\"Publication Version\"\n              onUserInput={this.props.setFormData}\n              value={this.props.formData[publicationVersion]}\n            />\n          </div>\n        );\n      }\n    }\n\n    return fileFields;\n  }\n\n  createCollabEmailFields() {\n    let collabEmails = [];\n    if (this.props.formData.collaborators) {\n      this.props.formData.collaborators.forEach(\n        function(c, i) {\n          let name = 'collabEmail_' + c.name;\n          collabEmails.push(\n            <EmailElement\n              name={name}\n              label={c.name + (c.name.slice(-1) === 's' ? '\\'' : '\\'s') + ' Email'}\n              onUserInput={this.setCollaboratorEmail}\n              onUserBlur={this.props.validateEmail}\n              toggleEmailNotify={this.toggleEmailNotify}\n              errorMessage={this.props.formErrors[name]}\n              required={false}\n              value={this.props.formData.collaborators[i].email}\n              addressee={c.name}\n            />\n          );\n        }, this);\n    }\n    return collabEmails;\n  }\n\n  addCollaborator(formElement, value, pendingValKey) {\n    let collaborators = this.props.formData.collaborators || [];\n    collaborators.push(\n      {\n        name: value,\n        email: null,\n        notify: false,\n      }\n    );\n\n    this.props.setFormData('collaborators', collaborators);\n    this.props.setFormData(pendingValKey, null);\n  }\n\n  removeCollaborator(formElement, value) {\n    let collaborators = this.props.formData.collaborators || [];\n    collaborators = collaborators.filter((c) => c.name !== value);\n    this.props.setFormData('collaborators', collaborators);\n  }\n\n  setCollaboratorEmail(formElement, value) {\n    let collabName = formElement.split('_')[1];\n    let collaborators = this.props.formData.collaborators;\n    let i = collaborators.findIndex((c) => c.name === collabName);\n    collaborators[i].email = value;\n    this.props.setFormData('collaborators', collaborators);\n  }\n\n  toggleEmailNotify(e) {\n    if (e.target.name.indexOf('collabEmail') > -1) {\n      let collaborators = this.props.formData.collaborators;\n      let collabName = e.target.value;\n      let i = collaborators.findIndex((c) => c.name === collabName);\n      collaborators[i].notify = !collaborators[i].notify;\n      this.props.setFormData('collaborators', collaborators);\n    } else if (e.target.name === 'leadInvestigatorEmail_notify') {\n      let currNotify = this.props.formData.notifyLead || false;\n      this.props.setFormData('notifyLead', !currNotify);\n    }\n  }\n\n  render() {\n    let collabEmails = this.createCollabEmailFields();\n    let fileFields = this.createFileFields();\n\n    let voiHelp = (<div>For help finding variables of interest, consult\n      the <a href={loris.BaseURL + '/datadict/'}>Data Dictionary</a>\n      </div>);\n    let collabNames = [];\n    if (this.props.formData.collaborators) {\n      collabNames = this.props.formData.collaborators.map((c) => c.name);\n    }\n\n    let voiTypeOptions = {\n      All: 'All',\n      Behavioral: 'Behavioral',\n      Imaging: 'Imaging',\n    };\n\n    const allVOIs = this.props.allVOIs;\n    let voiOptions = {};\n    let type = this.props.formData.voiType;\n    if (type && type !== 'All') {\n      voiOptions = this.props.allVOIs[type];\n    } else {\n      // maintain behavioral VoIs by creating an object copy\n      const bvlCopy = Object.assign({}, allVOIs.Behavioral);\n      voiOptions = Object.assign(bvlCopy, allVOIs.Imaging);\n    }\n\n    return (\n      <div>\n        <TextareaElement\n          name=\"description\"\n          label=\"Description\"\n          onUserInput={this.props.setFormData}\n          required={true}\n          value={this.props.formData.description}\n        />\n        <TextboxElement\n          name=\"leadInvestigator\"\n          label=\"Lead Investigator\"\n          onUserInput={this.props.setFormData}\n          required={true}\n          value={this.props.formData.leadInvestigator}\n        />\n        <EmailElement\n          name=\"leadInvestigatorEmail\"\n          label=\"Lead Investigator Email\"\n          onUserInput={this.props.setFormData}\n          onUserBlur={this.props.validateEmail}\n          toggleEmailNotify={this.toggleEmailNotify}\n          errorMessage={this.props.formErrors.leadInvestigatorEmail}\n          required={true}\n          value={this.props.formData.leadInvestigatorEmail}\n          addressee=\"leadInvestigator\"\n        />\n        <TagsElement\n          name=\"usersWithEditPerm\"\n          id=\"usersWithEditPerm\"\n          label=\"LORIS Users with Edit Permission\"\n          options={this.props.users}\n          useSearch={true}\n          strictSearch={true}\n          onUserInput={this.props.setFormData}\n          onUserAdd={this.props.addListItem}\n          onUserRemove={this.props.removeListItem}\n          value={this.props.formData.pendingUWEP}\n          pendingValKey=\"pendingUWEP\"\n          items={this.props.formData.usersWithEditPerm}\n          btnLabel=\"Add User\"\n        />\n        <TagsElement\n          name=\"collaborators\"\n          id=\"collaborators\"\n          label=\"Collaborators\"\n          options={this.props.allCollabs}\n          useSearch={true}\n          strictSearch={false}\n          onUserInput={this.props.setFormData}\n          onUserAdd={this.addCollaborator}\n          onUserRemove={this.removeCollaborator}\n          value={this.props.formData.pendingCollab}\n          pendingValKey=\"pendingCollab\"\n          items={collabNames}\n          btnLabel=\"Add Collaborator\"\n        />\n        {collabEmails}\n        <TagsElement\n          name=\"keywords\"\n          id=\"keywords\"\n          label=\"Keywords\"\n          options={this.props.allKWs}\n          useSearch={true}\n          strictSearch={false}\n          onUserInput={this.props.setFormData}\n          onUserAdd={this.props.addListItem}\n          onUserRemove={this.props.removeListItem}\n          value={this.props.formData.pendingKWItem}\n          pendingValKey=\"pendingKWItem\"\n          items={this.props.formData.keywords}\n          btnLabel=\"Add Keyword\"\n        />\n        <SelectElement\n          name=\"voiType\"\n          label=\"Type of Variables of Interest\"\n          options={voiTypeOptions}\n          onUserInput={this.props.setFormData}\n          value={this.props.formData.voiType}\n          emptyOption={false}\n        />\n        <TagsElement\n          name=\"voiFields\"\n          id=\"voiFields\"\n          label=\"Variables of Interest\"\n          useSearch={true}\n          strictSearch={true}\n          onUserInput={this.props.setFormData}\n          onUserAdd={this.props.addListItem}\n          onUserRemove={this.props.removeListItem}\n          required={false}\n          value={this.props.formData.pendingItemVF}\n          options={voiOptions}\n          pendingValKey=\"pendingItemVF\"\n          items={this.props.formData.voiFields}\n          btnLabel=\"Add Variable of Interest\"\n        />\n        <StaticElement\n          text={voiHelp}\n        />\n        {fileFields}\n        <ButtonElement label={this.props.editMode ? 'Submit' : 'Propose Project'}/>\n      </div>\n    );\n  }\n}\n\nexport default ProjectFormFields;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * This file contains React components for Tabs component.\n *\n * @author Loris Team\n * @version 1.1.0\n *\n */\n\nimport React, {Component} from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * Tabs Component.\n * React wrapper for Bootstrap tabs. Allows to dynamically render tabs\n * and corresponding tab panes.\n *\n * ================================================\n * Usage:\n *\n * 1. Define an array of tabs with IDs and labels\n *\n * `let tabList = [{id: \"tab1\", label: \"This is tab title\"}];`\n *\n * 2. Pass tabList as <Tab> property and <TabPane> as child\n *  ```\n * <Tabs tabs={tabList} defaultTab=\"tab1\">\n *   <TabPane TabId={tabList[0].id}>\n *     // Tab content goes here\n *   </TabPane>\n * </Tabs>\n * ```\n * =================================================\n *\n */\nclass Tabs extends Component {\n  constructor(props) {\n    super(props);\n\n    const hash = window.location.hash;\n    let activeTab = '';\n\n    /**\n     * Determine the initial active tab in this order\n     * 1. Try to infer from the URL, otherwise\n     * 2. Try to infer from the defaultTab prop, otherwise\n     * 3. Set to be the first tab of the list\n     */\n    if (this.props.updateURL && hash) {\n      activeTab = hash.substr(1);\n    } else if (this.props.defaultTab) {\n      activeTab = this.props.defaultTab;\n    } else if (this.props.tabs.length > 0) {\n      activeTab = this.props.tabs[0].id;\n    }\n\n    this.state = {\n      activeTab: activeTab,\n    };\n\n    this.handleClick = this.handleClick.bind(this);\n    this.getTabs = this.getTabs.bind(this);\n    this.getTabPanes = this.getTabPanes.bind(this);\n  }\n\n  handleClick(tabId, e) {\n    this.setState({activeTab: tabId});\n    this.props.onTabChange(tabId);\n\n    // Add tab href to URL querystring and scroll the page to top\n    if (this.props.updateURL) {\n      const scrollDistance = $('body').scrollTop() || $('html').scrollTop();\n      window.location.hash = e.target.hash;\n      $('html,body').scrollTop(scrollDistance);\n    }\n  }\n\n  getTabs() {\n    let tabs = (this.props.tabs).map(function(tab) {\n      let tabClass = this.state.activeTab === tab.id ? 'active' : null;\n      let href = '#' + tab.id;\n      let tabID = 'tab-' + tab.id;\n      return (\n        <li\n          role=\"presentation\"\n          className={tabClass}\n          key={tab.id}\n        >\n          <a id={tabID}\n             href={href}\n             role=\"tab\"\n             data-toggle=\"tab\"\n             onClick={this.handleClick.bind(null, tab.id)}\n          >\n            {tab.label}\n          </a>\n        </li>\n      );\n    }.bind(this));\n\n    return tabs;\n  }\n\n  getTabPanes() {\n    let tabPanes = React.Children.map(this.props.children, function(child, key) {\n      if (child) {\n        return React.cloneElement(child, {\n          activeTab: this.state.activeTab,\n          key: key,\n        });\n      }\n    }.bind(this));\n\n    return tabPanes;\n  }\n\n  render() {\n    let tabs = this.getTabs();\n    let tabPanes = this.getTabPanes();\n    let tabStyle = {\n      marginLeft: 0,\n      marginBottom: '5px',\n    };\n\n    return (\n      <div>\n        <ul className=\"nav nav-tabs\" role=\"tablist\" style={tabStyle}>\n          {tabs}\n        </ul>\n        <div className=\"tab-content\">\n          {tabPanes}\n        </div>\n      </div>\n    );\n  }\n}\nTabs.propTypes = {\n  tabs: PropTypes.array.isRequired,\n  defaultTab: PropTypes.string,\n  updateURL: PropTypes.bool,\n};\nTabs.defaultProps = {\n  onTabChange: function() {},\n  // Set updateURL to default to true but allow for change\n  // Nested tabs should set this variable to false\n  updateURL: true,\n};\n\n/**\n * Allows to dynamically render vertical tabs corresponding to tab panes.\n */\n\nclass VerticalTabs extends Component {\n  constructor(props) {\n    super(props);\n\n    const hash = window.location.hash;\n    let activeTab = '';\n\n    /**\n     * Determine the initial active tab in this order\n     * 1. Try to infer from the URL, otherwise\n     * 2. Try to infer from the defaultTab prop, otherwise\n     * 3. Set to be the first tab of the list\n     */\n    if (this.props.updateURL && hash) {\n      activeTab = hash.substr(1);\n    } else if (this.props.defaultTab) {\n      activeTab = this.props.defaultTab;\n    } else if (this.props.tabs.length > 0) {\n      activeTab = this.props.tabs[0].id;\n    }\n\n    this.state = {\n      activeTab: activeTab,\n    };\n\n    this.handleClick = this.handleClick.bind(this);\n    this.getTabs = this.getTabs.bind(this);\n    this.getTabPanes = this.getTabPanes.bind(this);\n  }\n\n  handleClick(tabId, e) {\n    this.setState({activeTab: tabId});\n    this.props.onTabChange(tabId);\n\n    // Add tab href to URL querystring and scroll the page to top\n    if (this.props.updateURL) {\n      const scrollDistance = $('body').scrollTop() || $('html').scrollTop();\n      window.location.hash = e.target.hash;\n      $('html,body').scrollTop(scrollDistance);\n    }\n  }\n\n  getTabs() {\n    let tabs = (this.props.tabs).map(function(tab) {\n      let tabClass = this.state.activeTab === tab.id ? 'active' : null;\n      let href = '#' + tab.id;\n      let tabID = 'tab-' + tab.id;\n      return (\n        <li\n          role=\"presentation\"\n          className={tabClass}\n          key={tab.id}\n        >\n          <a id={tabID}\n             href={href}\n             role=\"tab\"\n             data-toggle=\"tab\"\n             onClick={this.handleClick.bind(null, tab.id)}\n          >\n            {tab.label}\n          </a>\n        </li>\n      );\n    }.bind(this));\n\n    return tabs;\n  }\n\n  getTabPanes() {\n    let tabPanes = React.Children.map(this.props.children, function(child, key) {\n      if (child) {\n        return React.cloneElement(child, {\n          activeTab: this.state.activeTab,\n          key: key,\n        });\n      }\n    }.bind(this));\n\n    return tabPanes;\n  }\n\n  render() {\n    let tabs = this.getTabs();\n    let tabPanes = this.getTabPanes();\n    let tabStyle = {\n      marginLeft: 0,\n      marginBottom: '5px',\n    };\n\n    return (\n      <div>\n        <div className=\"tabbable col-md-3 col-sm-3\">\n          <ul className=\"nav nav-pills nav-stacked\" role=\"tablist\" style={tabStyle}>\n            {tabs}\n          </ul>\n        </div>\n        <div className=\"tab-content col-md-9 col-sm-9\">\n          {tabPanes}\n        </div>\n      </div>\n    );\n  }\n}\nVerticalTabs.propTypes = {\n  tabs: PropTypes.array.isRequired,\n  defaultTab: PropTypes.string,\n  updateURL: PropTypes.bool,\n};\nVerticalTabs.defaultProps = {\n  onTabChange: function() {},\n  // Set updateURL to default to true but allow for change\n  // Nested tabs should set this variable to false\n  updateURL: true,\n};\n\n/*\n * TabPane component.\n * Used to wrap content for every tab.\n */\nclass TabPane extends Component {\n  render() {\n    let classList = 'tab-pane';\n    let title;\n\n    if (this.props.TabId === this.props.activeTab) {\n      classList += ' active';\n    }\n    if (this.props.Title) {\n      title = <h1>{this.props.Title}</h1>;\n    }\n\n    return (\n      <div role=\"tabpanel\" className={classList} id={this.props.TabId}>\n        {title}\n        {this.props.children}\n      </div>\n    );\n  }\n}\nTabPane.propTypes = {\n  TabId: PropTypes.string.isRequired,\n  Title: PropTypes.string,\n  activeTab: PropTypes.string,\n};\n\nexport {\n  Tabs,\n  VerticalTabs,\n  TabPane,\n};\n","/**\n * This file contains React component for Panel\n *\n * @author Alex I.\n * @version 1.0.0\n *\n */\n\nimport React, {Component} from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * Panel component\n * Wraps children in a collapsible bootstrap panel\n */\nclass Panel extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      collapsed: this.props.initCollapsed,\n    };\n\n    // Initialize panel class based on collapsed status\n    this.panelClass = (\n      this.props.initCollapsed ?\n        'panel-collapse collapse' :\n        'panel-collapse collapse in'\n    );\n\n    this.toggleCollapsed = this.toggleCollapsed.bind(this);\n  }\n\n  toggleCollapsed() {\n    this.setState({collapsed: !this.state.collapsed});\n  }\n\n  render() {\n    // Change arrow direction based on collapse status\n    let glyphClass = (\n      this.state.collapsed ?\n        'glyphicon pull-right glyphicon-chevron-down' :\n        'glyphicon pull-right glyphicon-chevron-up'\n    );\n\n    // Add panel header, if title is set\n    const panelHeading = this.props.title ? (\n      <div\n        className=\"panel-heading\"\n        onClick={this.toggleCollapsed}\n        data-toggle=\"collapse\"\n        data-target={'#' + this.props.id}\n        style={{cursor: 'pointer'}}\n      >\n        {this.props.title}\n        <span className={glyphClass}></span>\n      </div>\n    ) : '';\n\n    return (\n      <div className=\"panel panel-primary\">\n        {panelHeading}\n        <div id={this.props.id} className={this.panelClass} role=\"tabpanel\">\n          <div className=\"panel-body\" style={{height: this.props.height}}>\n            {this.props.children}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nPanel.propTypes = {\n  id: PropTypes.string,\n  height: PropTypes.string,\n  title: PropTypes.string,\n};\nPanel.defaultProps = {\n  initCollapsed: false,\n  id: 'default-panel',\n  height: '100%',\n};\n\nexport default Panel;\n","import FilterForm from 'FilterForm';\nimport {Tabs, TabPane} from 'Tabs';\nimport PublicationUploadForm from './uploadForm.js';\n\nclass PublicationIndex extends React.Component {\n  constructor() {\n    super();\n    loris.hiddenHeaders = ['Description', 'Keywords', 'Variables Of Interest', 'Publication ID', 'Collaborators'];\n    this.state = {\n      isLoaded: false,\n      filter: {},\n    };\n\n    // Bind component instance to custom methods\n    this.fetchData = this.fetchData.bind(this);\n    this.updateFilter = this.updateFilter.bind(this);\n    this.resetFilters = this.resetFilters.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  fetchData() {\n    $.ajax(this.props.DataURL, {\n      method: 'GET',\n      dataType: 'json',\n      success: function(data) {\n        this.setState({\n          Data: data,\n          isLoaded: true,\n        });\n      }.bind(this),\n      error: function(error) {\n        console.error(error);\n      },\n    });\n  }\n\n  updateFilter(filter) {\n    this.setState({filter});\n  }\n\n  resetFilters() {\n    this.publicationsFilter.clearFilter();\n  }\n\n  render() {\n    if (!this.state.isLoaded) {\n      return (\n        <button className=\"btn-info has-spinner\">\n          Loading\n          <span\n            className=\"glyphicon glyphicon-refresh glyphicon-refresh-animate\">\n          </span>\n        </button>\n      );\n    }\n    let tabList = [\n      {\n        id: 'browse',\n        label: 'Browse',\n      },\n    ];\n    let proposalTab;\n    if (loris.userHasPermission('publication_propose')) {\n      tabList.push({\n        id: 'propose',\n        label: 'Propose a Project',\n      });\n\n      proposalTab = (\n        <TabPane TabId={tabList[1].id}>\n          <PublicationUploadForm\n            DataURL={`${loris.BaseURL}/publication/ajax/getData.php?action=getData`}\n            action={`${loris.BaseURL}/publication/ajax/FileUpload.php?action=upload`}\n            editMode={false}\n          />\n        </TabPane>\n      );\n    }\n\n    const filterRef = function(f) {\n      this.publicationsFilter = f;\n    }.bind(this);\n\n    return (\n      <Tabs tabs={tabList} defaultTab=\"browse\" updateURL={true}>\n        <TabPane TabId={tabList[0].id}>\n          <FilterForm\n            Module=\"publication\"\n            name=\"publications_filter\"\n            id=\"publications_filter_form\"\n            ref={filterRef}\n            columns={3}\n            formElements={this.state.Data.form}\n            onUpdate={this.updateFilter}\n            filter={this.state.filter}\n          >\n            <br/>\n            <ButtonElement\n              label=\"Clear Filters\"\n              type=\"reset\"\n              onUserInput={this.resetFilters}\n            />\n          </FilterForm>\n          <StaticDataTable\n            Data={this.state.Data.Data}\n            Headers={this.state.Data.Headers}\n            Filter={this.state.filter}\n            getFormattedCell={this.formatColumn}\n          />\n        </TabPane>\n        {proposalTab}\n      </Tabs>\n    );\n  }\n\n  formatColumn(column, cell, rowData, rowHeaders) {\n    // If a column if set as hidden, don't display it\n    if (loris.hiddenHeaders.indexOf(column) > -1) {\n      return null;\n    }\n    // Create the mapping between rowHeaders and rowData in a row object.\n    let row = {};\n    rowHeaders.forEach(function(header, index) {\n      row[header] = rowData[index];\n    }, this);\n    let classes = [];\n    if (column === 'Title') {\n      let pubID = row['Publication ID'];\n      let viewURL = loris.BaseURL + '/publication/view_project?id=' + pubID;\n\n      return (\n        <td>\n          <a href={viewURL}>\n            {cell}\n          </a>\n        </td>\n      );\n    }\n    return <td className={classes}>{cell}</td>;\n  }\n}\n\n$(function() {\n  const publicationIndex = (\n    <div className=\"page-publications\">\n      <PublicationIndex DataURL={`${loris.BaseURL}/publication/?format=json`}/>\n    </div>\n  );\n\n  ReactDOM.render(publicationIndex, document.getElementById('lorisworkspace'));\n});\n","import ProjectFormFields from './projectFields';\n\nclass PublicationUploadForm extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      Data: {},\n      formData: {},\n      numFiles: 0,\n      uploadResult: null,\n      loadError: undefined,\n      formErrors: {},\n      isLoaded: false,\n      loadedData: 0,\n      uploadProgress: -1,\n    };\n\n    this.setFormData = this.setFormData.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.addListItem = this.addListItem.bind(this);\n    this.removeListItem = this.removeListItem.bind(this);\n    this.validateEmail = this.validateEmail.bind(this);\n    this.setFileData = this.setFileData.bind(this);\n    this.fetchData = this.fetchData.bind(this);\n  }\n\n  validateEmail(field, email) {\n    let formErrors = this.state.formErrors;\n\n    // don't supply error if email is blank\n    if (email === '' || email === null || email === undefined) {\n      delete formErrors[field];\n      // if email is invalid, set error, else nullify error\n    } else if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(email) === false) {\n      formErrors[field] = 'Invalid email';\n    } else {\n      delete formErrors[field];\n    }\n    this.setState({formErrors});\n  }\n\n  fetchData() {\n    let self = this;\n    $.ajax(this.props.DataURL, {\n      dataType: 'json',\n      success: function(data) {\n        self.setState({\n          Data: data,\n          isLoaded: true,\n        });\n      },\n      error: function(data, errorCode, errorMsg) {\n        console.error(data, errorCode, errorMsg);\n        self.setState({\n          loadError: 'An error occurred when loading the form!',\n        });\n      },\n    });\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  setFileData(formElement, value) {\n    let numFiles = this.state.numFiles;\n    if (!this.state.formData[formElement]) {\n      numFiles += 1;\n      this.setState({numFiles: numFiles});\n    }\n    this.setFormData(formElement, value);\n  }\n\n  setFormData(formElement, value) {\n    let formData = this.state.formData;\n    formData[formElement] = value;\n    this.setState({\n      formData: formData,\n    });\n  }\n\n  addListItem(formElement, value, pendingValKey) {\n    let formData = this.state.formData;\n    let listItems = formData[formElement] || [];\n    listItems.push(value);\n    formData[formElement] = listItems;\n    formData[pendingValKey] = null;\n    this.setState({\n      formData: formData,\n    });\n  }\n\n  removeListItem(formElement, value) {\n    let formData = this.state.formData;\n    let listItems = formData[formElement];\n    let index = listItems.indexOf(value);\n\n    if (index > -1) {\n      listItems.splice(index, 1);\n      formData[formElement] = listItems;\n      this.setState({\n        formData: formData,\n      });\n    }\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n\n    if (Object.keys(this.state.formErrors).length > 0) {\n      swal(\n        'Please fix any remaining form errors before submission',\n        '',\n        'error'\n      );\n      return;\n    }\n    let formData = this.state.formData;\n\n    let formObj = new FormData();\n    for (let key in formData) {\n      if (formData.hasOwnProperty(key) && formData[key] !== '') {\n        let formVal;\n        if (Array.isArray(formData[key])) {\n          formVal = JSON.stringify(formData[key]);\n        } else {\n          formVal = formData[key];\n        }\n        formObj.append(key, formVal);\n      }\n    }\n\n    $.ajax({\n      type: 'POST',\n      url: this.props.action,\n      data: formObj,\n      cache: false,\n      contentType: false,\n      processData: false,\n      success: function() {\n        // reset form data\n        this.setState({\n          formData: {},\n          numFiles: 0,\n        });\n        swal(\n          {\n            title: 'Submission Successful!',\n            type: 'success',\n          },\n          function() {\n            window.location.replace(loris.BaseURL + '/publication/');\n          }\n        );\n      }.bind(this),\n      error: function(jqXHR) {\n        console.error(jqXHR);\n        let resp = '';\n        try {\n          resp = JSON.parse(jqXHR.responseText).message;\n        } catch (e) {\n          console.error(e);\n        }\n        swal('Something went wrong!', resp, 'error');\n      },\n    });\n  }\n\n  render() {\n    // Data loading error\n    if (this.state.loadError !== undefined) {\n      return (\n        <div className=\"alert alert-danger text-center\">\n          <strong>\n            {this.state.error}\n          </strong>\n        </div>\n      );\n    }\n\n    // Waiting for data to load\n    if (!this.state.isLoaded) {\n      return (\n        <button className=\"btn-info has-spinner\">\n          Loading\n          <span\n            className=\"glyphicon glyphicon-refresh glyphicon-refresh-animate\">\n          </span>\n        </button>\n      );\n    }\n\n    let createElements;\n    let formClass = 'col-md-12 col-lg-12';\n    if (!this.props.editMode) {\n      createElements = [\n        <h3 className=\"col-md-offset-3 col-lg-offset-3\">Propose a new project</h3>,\n        <TextboxElement\n          name=\"title\"\n          label=\"Title\"\n          onUserInput={this.setFormData}\n          required={true}\n          value={this.state.formData.title}\n        />,\n      ];\n      // if not in edit mode, shrink form for consistent display\n      formClass = 'col-md-8 col-lg-7';\n    }\n\n    return (\n      <div className=\"row\">\n        <div className={formClass}>\n          <FormElement\n            name=\"publicationUpload\"\n            onSubmit={this.handleSubmit}\n            ref=\"form\"\n            fileUpload={true}\n          >\n            {createElements}\n            <ProjectFormFields\n              formData={this.state.formData}\n              formErrors={this.state.formErrors}\n              numFiles={this.state.numFiles}\n              setFormData={this.setFormData}\n              setFileData={this.setFileData}\n              addListItem={this.addListItem}\n              removeListItem={this.removeListItem}\n              validateEmail={this.validateEmail}\n              toggleEmailNotify={this.toggleEmailNotify}\n              uploadTypes={this.state.Data.uploadTypes}\n              users={this.state.Data.users}\n              allVOIs={this.state.Data.allVOIs}\n              allKWs={this.state.Data.allKWs}\n              allCollabs={this.state.Data.allCollabs}\n              editMode={false}\n            />\n          </FormElement>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default PublicationUploadForm;\n"],"sourceRoot":""}