{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./modules/publication/jsx/projectFields.js","webpack:///./modules/publication/jsx/viewProjectIndex.js","webpack:///./modules/publication/jsx/viewProject.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","EmailElement","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","handleChange","handleBlur","e","props","onUserInput","onUserBlur","disabled","required","errorMessage","requiredHTML","elementClass","React","createElement","className","htmlFor","id","label","type","onChange","onBlur","toggleEmailNotify","addressee","Component","console","ProjectFormFields","_this2","createCollabEmailFields","deleteUpload","createFileFields","addCollaborator","removeCollaborator","setCollaboratorEmail","uploadID","self","swal","title","text","showCancelButton","confirmButtonText","cancelButtonText","willDelete","url","loris","$","method","success","fileFields","files","forEach","f","_this3","downloadURL","encodeURIComponent","URL","link","href","style","cursor","onClick","PublicationUploadID","existFileFlag","pubType","pubCit","pubVer","pubTypeStr","uploadTypes","formData","StaticElement","TextboxElement","setFormData","numFiles","fileName","FileElement","setFileData","publicationType","publicationCitation","publicationVersion","SelectElement","options","collabEmails","collaborators","validateEmail","formErrors","email","formElement","pendingValKey","notify","filter","collabName","findIndex","currNotify","notifyLead","voiHelp","collabNames","map","voiTypeOptions","All","Behavioral","Imaging","allVOIs","voiOptions","voiType","bvlCopy","TextareaElement","description","leadInvestigator","leadInvestigatorEmail","TagsElement","users","useSearch","strictSearch","onUserAdd","addListItem","onUserRemove","removeListItem","pendingUWEP","items","usersWithEditPerm","btnLabel","allCollabs","pendingCollab","allKWs","pendingKWItem","keywords","emptyOption","pendingItemVF","voiFields","ButtonElement","editMode","_viewProject","args","QueryString","document","src","viewProject","_viewProject2","default","DataURL","BaseURL","action","ReactDOM","_projectFields","ViewProject","state","isLoaded","handleSubmit","createFileDownloadLinks","createMenuFilterLinks","createStaticComponents","createEditableComponents","fetchData","field","undefined","test","setState","formObj","FormData","formVal","Array","JSON","data","cache","contentType","processData","error","jqXHR","resp","dataType","status","voi","rejectedReason","statusOpts","userCanEdit","_error","errorCode","errorMsg","toReturn","download","uploadType","PublicationUploadTypeID","Citation","Version","stringArr","filterVar","links","vois","collabLinks","keywordLinks","voiLinks","length","_projectFields2","listItems","index","statusElement","rejectReason","reviewBtn","statusID","statClassMap","Pending","Approved","Rejected","statusText","formElements","FormElement","onSubmit","ref"],"mappings":"mBACA,IAAAA,oBAGA,SAAAC,oBAAAC,UAGA,GAAAF,iBAAAE,UAAA,CACA,OAAAF,iBAAAE,UAAAC,QAGA,IAAAC,OAAAJ,iBAAAE,WACAG,EAAAH,SACAI,EAAA,MACAH,YAIAI,QAAAL,UAAAM,KAAAJ,OAAAD,QAAAC,cAAAD,QAAAF,qBAGAG,OAAAE,EAAA,KAGA,OAAAF,OAAAD,QAKAF,oBAAAQ,EAAAF,QAGAN,oBAAAS,EAAAV,iBAGAC,oBAAAU,EAAA,SAAAR,QAAAS,KAAAC,QACA,IAAAZ,oBAAAa,EAAAX,QAAAS,MAAA,CACAG,OAAAC,eAAAb,QAAAS,MAA0CK,WAAA,KAAAC,IAAAL,WAK1CZ,oBAAAkB,EAAA,SAAAhB,SACA,UAAAiB,SAAA,aAAAA,OAAAC,YAAA,CACAN,OAAAC,eAAAb,QAAAiB,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAAb,QAAA,cAAiDmB,MAAA,QAQjDrB,oBAAAsB,EAAA,SAAAD,MAAAE,MACA,GAAAA,KAAA,EAAAF,MAAArB,oBAAAqB,OACA,GAAAE,KAAA,SAAAF,MACA,GAAAE,KAAA,UAAAF,QAAA,UAAAA,aAAAG,WAAA,OAAAH,MACA,IAAAI,GAAAX,OAAAY,OAAA,MACA1B,oBAAAkB,EAAAO,IACAX,OAAAC,eAAAU,GAAA,WAAyCT,WAAA,KAAAK,QACzC,GAAAE,KAAA,UAAAF,OAAA,iBAAAM,OAAAN,MAAArB,oBAAAU,EAAAe,GAAAE,IAAA,SAAAA,KAAgH,OAAAN,MAAAM,MAAqBC,KAAA,KAAAD,MACrI,OAAAF,IAIAzB,oBAAA6B,EAAA,SAAA1B,QACA,IAAAS,OAAAT,eAAAqB,WACA,SAAAM,aAA2B,OAAA3B,OAAA,YAC3B,SAAA4B,mBAAiC,OAAA5B,QACjCH,oBAAAU,EAAAE,OAAA,IAAAA,QACA,OAAAA,QAIAZ,oBAAAa,EAAA,SAAAmB,OAAAC,UAAsD,OAAAnB,OAAAoB,UAAAC,eAAA5B,KAAAyB,OAAAC,WAGtDjC,oBAAAoC,EAAA,GAIA,OAAApC,wCAAAqC,EAAA,suDClFMC,iFACJ,SAAAA,eAAcC,gBAAAC,KAAAF,cAAA,IAAAG,MAAAC,2BAAAF,MAAAF,aAAAK,WAAA7B,OAAA8B,eAAAN,eAAA/B,KAAAiC,OAEZC,MAAAI,aAAoBJ,MAAAI,aAAAjB,KAApBa,OACAA,MAAAK,WAAkBL,MAAAK,WAAAlB,KAAlBa,OAHY,OAAAA,iFAMDM,GACXP,KAAAQ,MAAAC,YAAuBT,KAAAQ,MAAvBrC,KAAwCoC,SAAxC1B,qDAGS0B,GACTP,KAAAQ,MAAAE,WAAsBV,KAAAQ,MAAtBrC,KAAuCoC,SAAvC1B,+CAIA,IAAI8B,SAAWX,KAAAQ,MAAAG,SAAA,WAAf,KACA,IAAIC,SAAWZ,KAAAQ,MAAAI,SAAA,WAAf,KACA,IAAIC,aAAJ,KACA,IAAIC,aAAJ,KACA,IAAIC,aAAJ,iBAGA,GAAAH,SAAc,CACZE,aAAeE,MAAAC,cAAA,QAAMC,UAAN,oBAIjB,GAAIlB,KAAAQ,MAAJK,aAA6B,CAC3BA,aAAeG,MAAAC,cAAA,YAAOjB,KAAAQ,MAAWK,cACjCE,wCAGF,OACEC,MAAAC,cAAA,OAAKC,UAALH,cACEC,MAAAC,cAAA,SAAOC,UAAP,yBAA0CC,QAASnB,KAAAQ,MAAnDY,IACGpB,KAAAQ,MADHa,MAEGP,cAEHE,MAAAC,cAAA,OAAKC,UAAL,YACEF,MAAAC,cAAA,SACEK,KADF,OAEEJ,UAFF,eAGE/C,KAAM6B,KAAAQ,MAHRrC,KAIEiD,GAAIpB,KAAAQ,MAJNY,GAKEvC,MAAOmB,KAAAQ,MAAA3B,OALT,GAME+B,SACAD,SACAY,SAAUvB,KARZK,aASEmB,OAAQxB,KAAKM,aAEdO,cAEHG,MAAAC,cAAA,OAAKC,UAAL,YACAF,MAAAC,cAAA,YACED,MAAAC,cAAA,SACE9C,KAAM6B,KAAAQ,MAAArC,KADR,UAEEmD,KAFF,WAGEC,SAAUvB,KAAAQ,MAHZiB,kBAIE5C,MAAOmB,KAAAQ,MAAWkB,YAEpBV,MAAAC,cAAA,oEA7DiBD,MAAMW,WAqEjC7B,2BACE3B,KAD0B,GAE1BkD,MAF0B,GAG1BxC,MAH0B,GAI1B6C,UAJ0B,GAK1BN,GAL0B,KAM1BT,SAN0B,MAO1BC,SAP0B,MAQ1BC,aAR0B,GAS1BJ,YAAa,SAAAA,cACXmB,mDAEFlB,WAAY,SAAAA,oBAMRmB,6FACJ,SAAAA,oBAAc9B,gBAAAC,KAAA6B,mBAAA,IAAAC,OAAA5B,2BAAAF,MAAA6B,kBAAA1B,WAAA7B,OAAA8B,eAAAyB,oBAAA9D,KAAAiC,OAEZ8B,OAAAC,wBAA+BD,OAAAC,wBAAA3C,KAA/B0C,QACAA,OAAAE,aAAoBF,OAAAE,aAAA5C,KAApB0C,QACAA,OAAAG,iBAAwBH,OAAAG,iBAAA7C,KAAxB0C,QACAA,OAAAI,gBAAuBJ,OAAAI,gBAAA9C,KAAvB0C,QACAA,OAAAK,mBAA0BL,OAAAK,mBAAA/C,KAA1B0C,QACAA,OAAAM,qBAA4BN,OAAAM,qBAAAhD,KAA5B0C,QACAA,OAAAL,kBAAyBK,OAAAL,kBAAArC,KAAzB0C,QARY,OAAAA,uFAWDO,UACX,IAAIC,KAAJtC,KACAuC,MACEC,MADG,gBAEHC,KAFG,6CAGHnB,KAHG,UAIHoB,iBAJG,KAKHC,kBALG,kBAMHC,iBAAkB,kBAElB,SAAAC,YACE,GAAAA,WAAgB,CACd,IAAIC,IAAMC,2DAAVV,SACAW,YAGIC,OADF,SAEEC,QAAS,SAAAA,UACPZ,yFAQZ,IAAIa,cAEJ,GAAInD,KAAAQ,MAAJ4C,MAAsB,CACpBpD,KAAAQ,MAAA4C,MAAAC,QAAyB,SAAAC,GAAY,IAAAC,OAAAvD,KACnC,IAAIwD,YAAcT,yDAA6DU,mBAAmBH,EAAlGI,KACA,IAAIC,KACF3C,MAAAC,cAAA,YACED,MAAAC,cAAA,KAAG2C,KAAHJ,aAAuBF,EAAEI,KAD3B,KAGE1C,MAAAC,cAAA,QACEC,UADF,6BAEE2C,OAAQC,OAFV,WAGEC,QAAS,SAAAA,UAAA,OAAMR,OAAAvB,aAAkBsB,EAAxBU,yBAIf,IAAIC,cAAJ,kBACA,IAAIC,QAAUD,iCAAqCX,EAAnDU,oBACA,IAAIG,OAASF,qCAAyCX,EAAtDU,oBACA,IAAII,OAASH,oCAAwCX,EAArDU,oBACA,IAAIK,WAAarE,KAAAQ,MAAA8D,YAAuBtE,KAAAQ,MAAA+D,SAAxCL,UACAf,gBACEnC,MAAAC,cAAA,WACED,MAAAC,cAAAuD,eACEnD,MADFgD,WAEE5B,KAAMkB,OAER3C,MAAAC,cAAAwD,gBACEtG,KADFgG,OAEE9C,MAFF,WAGEZ,YAAaT,KAAAQ,MAHfkE,YAIE7F,MAAOmB,KAAAQ,MAAA+D,SAAAJ,UAETnD,MAAAC,cAAAwD,gBACEtG,KADFiG,OAEE/C,MAFF,sBAGEZ,YAAaT,KAAAQ,MAHfkE,YAIE7F,MAAOmB,KAAAQ,MAAA+D,SAAAH,aAlCfpE,MAyCF,IAAK,IAAIpC,EAAT,EAAgBA,GAAKoC,KAAAQ,MAArBmE,SAAA/G,IAA+C,CAC7C,IAAIgH,SAAW,QAAfhH,EACAuF,gBACEnC,MAAAC,cAAA4D,aACE1G,KADFyG,SAEExD,GAAI,uBAFNxD,EAGE6C,YAAaT,KAAAQ,MAHfsE,YAIEzD,MAJF,iBAKExC,MAAOmB,KAAAQ,MAAA+D,SAAAK,aAGX,GAAI5E,KAAAQ,MAAA+D,SAAJK,UAAmC,CACjC,IAAIG,gBAAkB,mBAAtBnH,EACA,IAAIoH,oBAAsB,uBAA1BpH,EACA,IAAIqH,mBAAqB,sBAAzBrH,EACAuF,gBACEnC,MAAAC,cAAA,WACED,MAAAC,cAAAiE,eACE/G,KADF4G,gBAEE1D,MAFF,mBAGEZ,YAAaT,KAAAQ,MAHfkE,YAIE7F,MAAOmB,KAAAQ,MAAA+D,SAJTQ,iBAKEI,QAASnF,KAAAQ,MALX8D,YAME1D,SAAU,OAEZI,MAAAC,cAAAwD,gBACEtG,KADF6G,oBAEE3D,MAFF,WAGEZ,YAAaT,KAAAQ,MAHfkE,YAIE7F,MAAOmB,KAAAQ,MAAA+D,SAAAS,uBAEThE,MAAAC,cAAAwD,gBACEtG,KADF8G,mBAEE5D,MAFF,sBAGEZ,YAAaT,KAAAQ,MAHfkE,YAIE7F,MAAOmB,KAAAQ,MAAA+D,SAAAU,yBAOjB,OAAA9B,qFAIA,IAAIiC,gBACJ,GAAIpF,KAAAQ,MAAA+D,SAAJc,cAAuC,CACrCrF,KAAAQ,MAAA+D,SAAAc,cAAAhC,QACE,SAAApF,EAAAL,GACE,IAAIO,KAAO,eAAiBF,EAA5BE,KACAiH,kBACEpE,MAAAC,cAAAnB,cACE3B,KACAkD,MAAOpD,QAAUA,2BAAVA,MAFT,SAGEwC,YAAaT,KAHfoC,qBAIE1B,WAAYV,KAAAQ,MAJd8E,cAKE7D,kBAAmBzB,KALrByB,kBAMEZ,aAAcb,KAAAQ,MAAA+E,WANhBpH,MAOEyC,SAPF,MAQE/B,MAAOmB,KAAAQ,MAAA+D,SAAAc,cAAAzH,GART4H,MASE9D,UAAWzD,EAAEE,SAbrB6B,MAkBF,OAAAoF,qEAGcK,YAAa5G,MAAO6G,eAClC,IAAIL,cAAgBrF,KAAAQ,MAAA+D,SAAAc,kBACpBA,oBAEIlH,KADFU,MAEE2G,MAFF,KAGEG,OAAQ,QAIZ3F,KAAAQ,MAAAkE,YAAA,gBAAAW,eACArF,KAAAQ,MAAAkE,YAAAgB,cAAA,oEAGiBD,YAAa5G,OAC9B,IAAIwG,cAAgBrF,KAAAQ,MAAA+D,SAAAc,kBACpBA,cAAgBA,cAAAO,OAAqB,SAAA3H,GAAA,OAAOA,SAAPY,QACrCmB,KAAAQ,MAAAkE,YAAA,gBAAAW,iFAGmBI,YAAa5G,OAChC,IAAIgH,WAAaJ,uBAAjB,GACA,IAAIJ,cAAgBrF,KAAAQ,MAAA+D,SAApBc,cACA,IAAIzH,EAAIyH,cAAAS,UAAwB,SAAA7H,GAAA,OAAOA,SAAP4H,aAChCR,6BACArF,KAAAQ,MAAAkE,YAAA,gBAAAW,2EAGgB9E,GAChB,GAAIA,sCAAJ,EAA+C,CAC7C,IAAI8E,cAAgBrF,KAAAQ,MAAA+D,SAApBc,cACA,IAAIQ,WAAatF,SAAjB1B,MACA,IAAIjB,EAAIyH,cAAAS,UAAwB,SAAA7H,GAAA,OAAOA,SAAP4H,aAChCR,yBAA2BA,iBAA3BA,OACArF,KAAAQ,MAAAkE,YAAA,gBAAAW,oBACK,GAAI9E,gBAAJ,+BAAsD,CAC3D,IAAIwF,WAAa/F,KAAAQ,MAAA+D,SAAAyB,YAAjB,MACAhG,KAAAQ,MAAAkE,YAAA,cAAAqB,qDAKF,IAAIX,aAAepF,KAAnB+B,0BACA,IAAIoB,WAAanD,KAAjBiC,mBAEA,IAAIgE,QAAWjF,MAAAC,cAAA,kEACTD,MAAAC,cAAA,KAAG2C,KAAMb,cAAT,kCAEN,IAAImD,eACJ,GAAIlG,KAAAQ,MAAA+D,SAAJc,cAAuC,CACrCa,YAAclG,KAAAQ,MAAA+D,SAAAc,cAAAc,IAAsC,SAAAlI,GAAA,OAAOA,EAAPE,OAGtD,IAAIiI,gBACFC,IADmB,MAEnBC,WAFmB,aAGnBC,QAAS,WAGX,IAAMC,QAAUxG,KAAAQ,MAAhBgG,QACA,IAAIC,cACJ,IAAInF,KAAOtB,KAAAQ,MAAA+D,SAAXmC,QACA,GAAIpF,MAAQA,OAAZ,MAA4B,CAC1BmF,WAAazG,KAAAQ,MAAAgG,QAAbC,UACK,CAEL,IAAME,QAAUrI,iBAAkBkI,QAAlCF,YACAG,WAAanI,sBAAuBkI,QAApCC,SAGF,OACEzF,MAAAC,cAAA,WACED,MAAAC,cAAA2F,iBACEzI,KADF,cAEEkD,MAFF,cAGEZ,YAAaT,KAAAQ,MAHfkE,YAIE9D,SAJF,KAKE/B,MAAOmB,KAAAQ,MAAA+D,SAAoBsC,cAE7B7F,MAAAC,cAAAwD,gBACEtG,KADF,mBAEEkD,MAFF,oBAGEZ,YAAaT,KAAAQ,MAHfkE,YAIE9D,SAJF,KAKE/B,MAAOmB,KAAAQ,MAAA+D,SAAoBuC,mBAE7B9F,MAAAC,cAAAnB,cACE3B,KADF,wBAEEkD,MAFF,0BAGEZ,YAAaT,KAAAQ,MAHfkE,YAIEhE,WAAYV,KAAAQ,MAJd8E,cAKE7D,kBAAmBzB,KALrByB,kBAMEZ,aAAcb,KAAAQ,MAAA+E,WANhBwB,sBAOEnG,SAPF,KAQE/B,MAAOmB,KAAAQ,MAAA+D,SARTwC,sBASErF,UAAU,qBAEZV,MAAAC,cAAA+F,aACE7I,KADF,oBAEEiD,GAFF,oBAGEC,MAHF,mCAIE8D,QAASnF,KAAAQ,MAJXyG,MAKEC,UALF,KAMEC,aANF,KAOE1G,YAAaT,KAAAQ,MAPfkE,YAQE0C,UAAWpH,KAAAQ,MARb6G,YASEC,aAActH,KAAAQ,MAThB+G,eAUE1I,MAAOmB,KAAAQ,MAAA+D,SAVTiD,YAWE9B,cAXF,cAYE+B,MAAOzH,KAAAQ,MAAA+D,SAZTmD,kBAaEC,SAAS,aAEX3G,MAAAC,cAAA+F,aACE7I,KADF,gBAEEiD,GAFF,gBAGEC,MAHF,gBAIE8D,QAASnF,KAAAQ,MAJXoH,WAKEV,UALF,KAMEC,aANF,MAOE1G,YAAaT,KAAAQ,MAPfkE,YAQE0C,UAAWpH,KARbkC,gBASEoF,aAActH,KAThBmC,mBAUEtD,MAAOmB,KAAAQ,MAAA+D,SAVTsD,cAWEnC,cAXF,gBAYE+B,MAZFvB,YAaEyB,SAAS,qBAtDbvC,aAyDEpE,MAAAC,cAAA+F,aACE7I,KADF,WAEEiD,GAFF,WAGEC,MAHF,WAIE8D,QAASnF,KAAAQ,MAJXsH,OAKEZ,UALF,KAMEC,aANF,MAOE1G,YAAaT,KAAAQ,MAPfkE,YAQE0C,UAAWpH,KAAAQ,MARb6G,YASEC,aAActH,KAAAQ,MAThB+G,eAUE1I,MAAOmB,KAAAQ,MAAA+D,SAVTwD,cAWErC,cAXF,gBAYE+B,MAAOzH,KAAAQ,MAAA+D,SAZTyD,SAaEL,SAAS,gBAEX3G,MAAAC,cAAAiE,eACE/G,KADF,UAEEkD,MAFF,gCAGE8D,QAHFiB,eAIE3F,YAAaT,KAAAQ,MAJfkE,YAKE7F,MAAOmB,KAAAQ,MAAA+D,SALTmC,QAMEuB,YAAa,QAEfjH,MAAAC,cAAA+F,aACE7I,KADF,YAEEiD,GAFF,YAGEC,MAHF,wBAIE6F,UAJF,KAKEC,aALF,KAME1G,YAAaT,KAAAQ,MANfkE,YAOE0C,UAAWpH,KAAAQ,MAPb6G,YAQEC,aAActH,KAAAQ,MARhB+G,eASE3G,SATF,MAUE/B,MAAOmB,KAAAQ,MAAA+D,SAVT2D,cAWE/C,QAXFsB,WAYEf,cAZF,gBAaE+B,MAAOzH,KAAAQ,MAAA+D,SAbT4D,UAcER,SAAS,6BAEX3G,MAAAC,cAAAuD,eACE/B,KAAMwD,UAjGV9C,WAoGEnC,MAAAC,cAAAmH,eAAe/G,MAAOrB,KAAAQ,MAAA6H,SAAA,SAAtB,mDAlUwBrH,MAAMW,2BAwUvBE,gFC/Zf,IAAAyG,aAAA9K,oBAAA,6IAEA,IAAM+K,KAAOC,gBAAgBC,uBAA7BC,KAEA1F,EAAE,WACA,IAAM2F,YACJ3H,MAAAC,cAAA,OAAKC,UAAL,kBACEF,MAAAC,cAAA,OAAKC,UAAL,OACEF,MAAAC,cAAA,OAAKC,UAAL,qBACEF,MAAAC,cAAC2H,cAADC,SACEC,QAAY/F,MAAZgG,QAAA,0DAAmFR,KADrFnH,GAEE4H,OAAWjG,MAAXgG,QAAA,0DAAkFR,KAAKnH,QAOjG6H,4BAA6BR,wBAA7BQ,82BClBF,IAAAC,eAAA1L,oBAAA,whCAEM2L,+EACJ,SAAAA,YAAA3I,OAAmBT,gBAAAC,KAAAmJ,aAAA,IAAAlJ,MAAAC,2BAAAF,MAAAmJ,YAAAhJ,WAAA7B,OAAA8B,eAAA+I,cAAApL,KAAAiC,KAAAQ,QAGjBP,MAAAmJ,OACE7E,YACAgB,cACAZ,SAHW,EAIX0E,SAAU,OAEZpJ,MAAAqJ,aAAoBrJ,MAAAqJ,aAAAlK,KAApBa,OACAA,MAAAyE,YAAmBzE,MAAAyE,YAAAtF,KAAnBa,OACAA,MAAA6E,YAAmB7E,MAAA6E,YAAA1F,KAAnBa,OACAA,MAAAsJ,wBAA+BtJ,MAAAsJ,wBAAAnK,KAA/Ba,OACAA,MAAAuJ,sBAA6BvJ,MAAAuJ,sBAAApK,KAA7Ba,OACAA,MAAAwJ,uBAA8BxJ,MAAAwJ,uBAAArK,KAA9Ba,OACAA,MAAAyJ,yBAAgCzJ,MAAAyJ,yBAAAtK,KAAhCa,OACAA,MAAAoH,YAAmBpH,MAAAoH,YAAAjI,KAAnBa,OACAA,MAAAsH,eAAsBtH,MAAAsH,eAAAnI,KAAtBa,OACAA,MAAAqF,cAAqBrF,MAAAqF,cAAAlG,KAArBa,OACAA,MAAA0J,UAAiB1J,MAAA0J,UAAAvK,KAAjBa,OAnBiB,OAAAA,kFAsBL2J,MAAOpE,OACnB,IAAID,WAAavF,KAAAoJ,MAAjB7D,WAGA,GAAIC,YAAgBA,QAAhBA,MAAkCA,QAAtCqE,UAA2D,QAClDtE,WAAPqE,YAEK,GAAI,gDAAAE,KAAAtE,SAAJ,MAA2E,CAChFD,sCACK,QACEA,WAAPqE,OAEF5J,KAAA+J,UAAexE,+DAGJhF,GACXA,mBAEA,GAAIjC,YAAY0B,KAAAoJ,MAAZ9K,mBAAJ,EAAmD,CACjDiE,0EAKA,OAEF,IAAIgC,SAAWvE,KAAAoJ,MAAf7E,SACA,IAAIyF,QAAU,IAAdC,SACA,IAAK,IAAL9K,OAAAoF,SAA0B,CACxB,GAAIA,8BAAgCA,gBAApC,GAA0D,CACxD,IAAI2F,aAAJ,EACA,GAAIC,cAAc5F,SAAlBpF,MAAkC,CAChC+K,QAAUE,eAAe7F,SAAzB2F,UACK,CACLA,QAAU3F,SAAV2F,KAEFF,6BAIJhH,QACE1B,KADK,OAELwB,IAAK9C,KAAAQ,MAFAwI,OAGLqB,KAHKL,QAILM,MAJK,MAKLC,YALK,MAMLC,YANK,MAOLtH,QAAS,SAAAA,UACPX,uCAEFkI,MAAO,SAAAA,MAAAC,OACL9I,qBACA,IAAI+I,KAAJ,wBACA,IACEA,KAAOP,WAAWM,MAAXN,cAAPO,QACA,MAAApK,GACAqB,iBAEFW,mFAMJ,IAAID,KAAJtC,KACAgD,OAAOhD,KAAAQ,MAAPwC,SACE4H,SADyB,OAEzB1H,QAAS,SAAAA,QAAAmH,MACP,IAAI9F,UACF/B,MAAO6H,KADM7H,MAEbqE,YAAawD,KAFAxD,YAGbC,iBAAkBuD,KAHLvD,iBAIbC,sBAAuBsD,KAJVtD,sBAKbf,WALa,MAMb6E,OAAQR,KANKQ,OAOb1C,UAAWkC,KAPES,IAQb9C,SAAUqC,KARGrC,SASb3C,cAAegF,KATFhF,cAUbqC,kBAAmB2C,KAVN3C,kBAWbqD,eAAgBV,KAAKU,gBAGvB,GAAIV,KAAJjH,MAAgB,CACdiH,mBAAmB,SAAA/G,GACjB,IAAIW,cAAJ,kBACA,IAAIC,QAAUD,iCAAqCX,EAAnDU,oBACA,IAAIG,OAASF,qCAAyCX,EAAtDU,oBACA,IAAII,OAASH,oCAAwCX,EAArDU,oBACAO,kBAAoBjB,EAApBiB,wBACAA,iBAAmBjB,EAAnBiB,SACAA,iBAAmBjB,EAAnBiB,UAIJjC,eACEiC,SACA0C,MAAOoD,KAFKpD,MAGZ+D,WAAYX,KAHAW,WAIZC,YAAaZ,KAJDY,YAKZzE,QAAS6D,KALG7D,QAMZsB,OAAQuC,KANIvC,OAOZF,WAAYyC,KAPAzC,WAQZtD,YAAa+F,KARD/F,YASZlB,MAAOiH,KATKjH,MAUZiG,SAAU,QAGdoB,MAAO,SAAAA,MAAAS,OAAAC,UAAAC,UACLxJ,yCACAU,eACEmI,MAAO,8GAObzK,KAAA2J,sFAIA,IAAIvG,MAAQpD,KAAAoJ,MAAZhG,MACA,IAAIiI,YACJjI,cAAc,SAAAE,GACZ,IAAIgI,SAAWvI,yDAA6DO,EAA5EI,IACA,IAAIC,KAAO3C,MAAAC,cAAA,KAAG2C,KAAH0H,UAAoBhI,EAAEI,KACjC,IAAI6H,WAAavL,KAAAoJ,MAAA9E,YAAuBhB,EAAxCkI,yBACAH,cACIrK,MAAAC,cAAAuD,eACEnD,MAAO,YADTkK,WAEE9I,KAAMkB,QAGZ,GAAIL,EAAJmI,SAAgB,CACdJ,cACErK,MAAAC,cAAAuD,eACEnD,MADF,WAEEoB,KAAMa,EAAEmI,YAId,GAAInI,EAAJoI,QAAe,CACbL,cACErK,MAAAC,cAAAuD,eACEnD,MADF,UAEEoB,KAAMa,EAAEoI,aAtBhBtI,MA4BA,OAAAiI,6EAGoBM,UAAWC,WAC/B,IAAIC,SACJF,kBACE,SAAA9M,OACEgN,WACE7K,MAAAC,cAAA,YACED,MAAAC,cAAA,KACE2C,KAAMb,6CAAqDlE,OAE1DA,OAJL,UAYN,OAAAgN,8EAIA,IAAIxG,mBAAJ,EACA,IAAI2C,cAAJ,EACA,IAAI8D,UAAJ,EACA,IAAIC,iBAAJ,EACA,IAAIC,kBAAJ,EACA,IAAIC,cAAJ,EACA,IAAI7I,WAAJ,EAEA,GAAIpD,KAAAoJ,MAAA7E,SAAAc,cAAA6G,OAAJ,EAAkD,CAChDH,YAAc/L,KAAAwJ,sBACZxJ,KAAAoJ,MAAA7E,SAAAc,cAAAc,IAAsC,SAAAlI,GAAA,OAAOA,EAAPE,OADxC4N,iBAIA1G,cAAgBrE,MAAAC,cAAAuD,eACdrG,KADc,gBAEdkD,MAFc,gBAGdoB,KAAMsJ,cAIV,GAAI/L,KAAAoJ,MAAA7E,SAAAyD,SAAAkE,OAAJ,EAA6C,CAC3CF,aAAehM,KAAAwJ,sBACbxJ,KAAAoJ,MAAA7E,SADayD,SAAfgE,YAIAhE,SAAWhH,MAAAC,cAAAuD,eACTrG,KADS,WAETkD,MAFS,WAGToB,KAAMuJ,eAIV,GAAIhM,KAAAoJ,MAAA7E,SAAA4D,UAAA+D,OAAJ,EAA8C,CAC5CD,SAAWjM,KAAAwJ,sBACTxJ,KAAAoJ,MAAA7E,SADS4D,UAAX8D,OAIAH,KAAO9K,MAAAC,cAAAuD,eACLrG,KADK,sBAELkD,MAFK,wBAGLoB,KAAMwJ,WAIV,GAAIjM,KAAAoJ,MAAAhG,MAAA8I,OAAJ,EAAiC,CAC/B9I,MAAQpD,KAARoD,0BAEF,OACEpC,MAAAC,cAAA,WACED,MAAAC,cAAAuD,eACErG,KADF,cAEEkD,MAFF,cAGEoB,KAAMzC,KAAAoJ,MAAA7E,SAAoBsC,cAE5B7F,MAAAC,cAAAuD,eACErG,KADF,mBAEEkD,MAFF,oBAGEoB,KAAMzC,KAAAoJ,MAAA7E,SAAoBuC,mBAE5B9F,MAAAC,cAAAuD,eACCrG,KADD,wBAECkD,MAFD,0BAGCoB,KAAMzC,KAAAoJ,MAAA7E,SAAoBwC,wBAd7B1B,cAAA2C,SAAA8D,KAmBG1I,mFAML,OACEpC,MAAAC,cAAA,WACED,MAAAC,cAACkL,gBAADtD,SACEzF,MAAOpD,KAAAoJ,MADThG,MAEEuB,SAAU3E,KAAAoJ,MAFZzE,SAGEJ,SAAUvE,KAAAoJ,MAHZ7E,SAIEgB,WAAYvF,KAAAoJ,MAJd7D,WAKEb,YAAa1E,KALf0E,YAMEI,YAAa9E,KANf8E,YAOEuC,YAAarH,KAPfqH,YAQEE,eAAgBvH,KARlBuH,eASEjC,cAAetF,KATjBsF,cAUE7D,kBAAmBzB,KAVrByB,kBAWE6C,YAAatE,KAAAoJ,MAXf9E,YAYE2C,MAAOjH,KAAAoJ,MAZTnC,MAaET,QAASxG,KAAAoJ,MAbX5C,QAcEsB,OAAQ9H,KAAAoJ,MAdVtB,OAeEF,WAAY5H,KAAAoJ,MAfdxB,WAgBES,SAhBF,KAiBEsB,UAAW3J,KAAK2J,6DAMZlE,YAAa5G,MAAO6G,eAC9B,IAAInB,SAAWvE,KAAAoJ,MAAf7E,SACA,IAAI6H,UAAY7H,0BAChB6H,sBACA7H,gCACAA,6BACAvE,KAAA+J,UACExF,iEAIWkB,YAAa5G,OAC1B,IAAI0F,SAAWvE,KAAAoJ,MAAf7E,SACA,IAAI6H,UAAY7H,SAAhBkB,aACA,IAAI4G,MAAQD,kBAAZvN,OAEA,GAAIwN,OAAJ,EAAgB,CACdD,0BAEA7H,gCACAvE,KAAA+J,UACExF,4DAKMkB,YAAa5G,OACvB,IAAI0F,SAAWvE,KAAAoJ,MAAf7E,SACAA,4BACAvE,KAAA+J,UACExF,2DAIQkB,YAAa5G,OACvB,IAAI8F,SAAW3E,KAAAoJ,MAAfzE,SACA,IAAK3E,KAAAoJ,MAAA7E,SAALkB,aAAuC,CACrCd,YACA3E,KAAA+J,UAAepF,WAEjB3E,KAAA0E,YAAAe,YAAA5G,+CAIA,IAAKmB,KAAAoJ,MAALC,SAA0B,CACxB,OACErI,MAAAC,cAAA,UAAQC,UAAR,kCAEEF,MAAAC,cAAA,QACEC,UADF,2DAMN,IAAIoL,mBAAJ,EACA,IAAIC,kBAAJ,EACA,IAAIC,eAAJ,EACA,IAAIC,SAAWzM,KAAAoJ,MAAA7E,SAAfsG,OACA,IAAIA,OAAS7K,KAAAoJ,MAAA4B,WAAbyB,UACA,GAAI1J,wBAAJ,uBAAoD,CAGlDuJ,cAAgBtL,MAAAC,cAAAiE,eACd/G,KADc,SAEdkD,MAFc,SAGdD,GAHc,SAIdvC,MAAOmB,KAAAoJ,MAAA7E,SAJOsG,OAKdpK,YAAaT,KALC0E,YAMd9D,SANc,KAOduE,QAASnF,KAAAoJ,MAPK4B,WAQd/C,YAAa,QAGf,GAAI4C,SAAJ,WAA2B,CACzB0B,aAAevL,MAAAC,cAAAwD,gBACbtG,KADa,iBAEbkD,MAFa,uBAGbxC,MAAOmB,KAAAoJ,MAAA7E,SAHMwG,eAIbtK,YAAaT,KAJA0E,YAKb9D,SAAU,OAKd4L,UAAYxM,KAAAoJ,MAAA6B,YAAApB,UAAqC7I,MAAAC,cAAAmH,eAAe/G,MAAhEmL,eACK,CACL,IAAME,cACJC,QADmB,eAEnBC,SAFmB,eAGnBC,SAAU,eAEZ,IAAIC,WACF9L,MAAAC,cAAA,QAAMC,UAAWwL,aAAjB7B,SACE7J,MAAAC,cAAA,cAAS4J,SAGbyB,cAAgBtL,MAAAC,cAAAuD,eACdnD,MADc,SAEdoB,KAAMqK,aAER,GAAIjC,SAAJ,WAA2B,CACzB0B,aAAevL,MAAAC,cAAAuD,eACbnD,MADa,uBAEboB,KAAMzC,KAAAoJ,MAAA7E,SAAoBwG,kBAKhC,IAAIgC,kBAAJ,EACA,GAAI/M,KAAAoJ,MAAJ6B,YAA4B,CAC1B8B,aAAe/M,KAAf+M,+BACK,CACLA,aAAe/M,KAAf+M,yBAKF,IAAIvK,WAAJ,EACA,GAAIxC,KAAAoJ,MAAA6B,aAA0BJ,SAA9B,UAAoD,CAClDrI,MACExB,MAAAC,cAAAwD,gBACEtG,KADF,QAEEkD,MAFF,QAGEZ,YAAaT,KAHf0E,YAIE9D,SAJF,KAKE/B,MAAOmB,KAAAoJ,MAAA7E,SAAoB/B,YAG1B,CACLA,MACExB,MAAAC,cAAA,OAAKC,UAAL,OACEF,MAAAC,cAAA,OAAKC,UADP,aAEEF,MAAAC,cAAA,MAAIC,UAAJ,YACGlB,KAAAoJ,MAAA7E,SAAoB/B,QAM7B,OACExB,MAAAC,cAAA,OAAKC,UAAL,OACEF,MAAAC,cAAA,OAAKC,UAAL,uBACEF,MAAAC,cAAA+L,aACE7O,KADF,cAEE8O,SAAUjN,KAFZsJ,aAGE4D,IAAI,QAHN1K,MAAA8J,cAAAC,aAAAQ,aASGP,qCA/baxL,MAAMW,2BAucjBwH","file":"./modules/publication/js/viewProjectIndex.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 93);\n","class EmailElement extends React.Component {\n  constructor() {\n    super();\n    this.handleChange = this.handleChange.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n  }\n\n  handleChange(e) {\n    this.props.onUserInput(this.props.name, e.target.value);\n  }\n\n  handleBlur(e) {\n    this.props.onUserBlur(this.props.name, e.target.value);\n  }\n\n  render() {\n    let disabled = this.props.disabled ? 'disabled' : null;\n    let required = this.props.required ? 'required' : null;\n    let errorMessage = null;\n    let requiredHTML = null;\n    let elementClass = 'row form-group';\n\n    // Add required asterix\n    if (required) {\n      requiredHTML = <span className=\"text-danger\">*</span>;\n    }\n\n    // Add error message\n    if (this.props.errorMessage) {\n      errorMessage = <span>{this.props.errorMessage}</span>;\n      elementClass = 'row form-group has-error';\n    }\n\n    return (\n      <div className={elementClass}>\n        <label className=\"col-sm-3 control-label\" htmlFor={this.props.id}>\n          {this.props.label}\n          {requiredHTML}\n        </label>\n        <div className=\"col-sm-7\">\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            name={this.props.name}\n            id={this.props.id}\n            value={this.props.value || ''}\n            required={required}\n            disabled={disabled}\n            onChange={this.handleChange}\n            onBlur={this.handleBlur}\n          />\n          {errorMessage}\n        </div>\n        <div className=\"col-sm-2\">\n        <span>\n          <input\n            name={this.props.name + '_notify'}\n            type=\"checkbox\"\n            onChange={this.props.toggleEmailNotify}\n            value={this.props.addressee}\n          />\n          <span>Send email notification?</span>\n        </span>\n        </div>\n      </div>\n    );\n  }\n}\n\nEmailElement.defaultProps = {\n  name: '',\n  label: '',\n  value: '',\n  addressee: '',\n  id: null,\n  disabled: false,\n  required: false,\n  errorMessage: '',\n  onUserInput: function() {\n    console.warn('onUserInput() callback is not set');\n  },\n  onUserBlur: function() {\n  },\n};\n\n// This class combines the common form elements between\n// Edit mode and initial Project Proposal/Creation mode\nclass ProjectFormFields extends React.Component {\n  constructor() {\n    super();\n    this.createCollabEmailFields = this.createCollabEmailFields.bind(this);\n    this.deleteUpload = this.deleteUpload.bind(this);\n    this.createFileFields = this.createFileFields.bind(this);\n    this.addCollaborator = this.addCollaborator.bind(this);\n    this.removeCollaborator = this.removeCollaborator.bind(this);\n    this.setCollaboratorEmail = this.setCollaboratorEmail.bind(this);\n    this.toggleEmailNotify = this.toggleEmailNotify.bind(this);\n  }\n\n  deleteUpload(uploadID) {\n    let self = this;\n    swal({\n      title: 'Are you sure?',\n      text: 'Are you sure you want to delete this file?',\n      type: 'warning',\n      showCancelButton: true,\n      confirmButtonText: 'Yes, I am sure!',\n      cancelButtonText: 'No, cancel it!',\n    },\n      function(willDelete) {\n        if (willDelete) {\n          let url = loris.BaseURL + '/publication/ajax/FileDelete.php?uploadID=' + uploadID;\n          $.ajax(\n            url,\n            {\n              method: 'DELETE',\n              success: function() {\n                self.props.fetchData();\n              },\n            });\n        }\n      });\n  }\n\n  createFileFields() {\n    let fileFields = [];\n    // Create download link & edit fields for existing files\n    if (this.props.files) {\n      this.props.files.forEach(function(f) {\n        let downloadURL = loris.BaseURL + '/publication/ajax/FileDownload.php?File=' + encodeURIComponent(f.URL);\n        let link = (\n          <span>\n            <a href={downloadURL}>{f.URL}</a>\n            &nbsp;&nbsp;\n            <span\n              className=\"glyphicon glyphicon-remove\"\n              style={{cursor: 'pointer'}}\n              onClick={() => this.deleteUpload(f.PublicationUploadID)}\n            />\n          </span>\n        );\n        let existFileFlag = 'existingUpload_';\n        let pubType = existFileFlag + 'publicationType_' + f.PublicationUploadID;\n        let pubCit = existFileFlag + 'publicationCitation_' + f.PublicationUploadID;\n        let pubVer = existFileFlag + 'publicationVersion_' + f.PublicationUploadID;\n        let pubTypeStr = this.props.uploadTypes[this.props.formData[pubType]];\n        fileFields.push(\n          <div>\n            <StaticElement\n              label={pubTypeStr}\n              text={link}\n            />\n            <TextboxElement\n              name={pubCit}\n              label=\"Citation\"\n              onUserInput={this.props.setFormData}\n              value={this.props.formData[pubCit]}\n            />\n            <TextboxElement\n              name={pubVer}\n              label=\"Publication Version\"\n              onUserInput={this.props.setFormData}\n              value={this.props.formData[pubVer]}\n            />\n          </div>\n        );\n      }, this);\n    }\n    // create fields for new files\n    for (let i = 0; i <= this.props.numFiles; i++) {\n      let fileName = 'file_' + i;\n      fileFields.push(\n        <FileElement\n          name={fileName}\n          id={'publicationUploadEl_' + i}\n          onUserInput={this.props.setFileData}\n          label=\"File to upload\"\n          value={this.props.formData[fileName]}\n        />\n      );\n      if (this.props.formData[fileName]) {\n        let publicationType = 'publicationType_' + i;\n        let publicationCitation = 'publicationCitation_' + i;\n        let publicationVersion = 'publicationVersion_' + i;\n        fileFields.push(\n          <div>\n            <SelectElement\n              name={publicationType}\n              label=\"Publication Type\"\n              onUserInput={this.props.setFormData}\n              value={this.props.formData[publicationType]}\n              options={this.props.uploadTypes}\n              required={true}\n            />\n            <TextboxElement\n              name={publicationCitation}\n              label=\"Citation\"\n              onUserInput={this.props.setFormData}\n              value={this.props.formData[publicationCitation]}\n            />\n            <TextboxElement\n              name={publicationVersion}\n              label=\"Publication Version\"\n              onUserInput={this.props.setFormData}\n              value={this.props.formData[publicationVersion]}\n            />\n          </div>\n        );\n      }\n    }\n\n    return fileFields;\n  }\n\n  createCollabEmailFields() {\n    let collabEmails = [];\n    if (this.props.formData.collaborators) {\n      this.props.formData.collaborators.forEach(\n        function(c, i) {\n          let name = 'collabEmail_' + c.name;\n          collabEmails.push(\n            <EmailElement\n              name={name}\n              label={c.name + (c.name.slice(-1) === 's' ? '\\'' : '\\'s') + ' Email'}\n              onUserInput={this.setCollaboratorEmail}\n              onUserBlur={this.props.validateEmail}\n              toggleEmailNotify={this.toggleEmailNotify}\n              errorMessage={this.props.formErrors[name]}\n              required={false}\n              value={this.props.formData.collaborators[i].email}\n              addressee={c.name}\n            />\n          );\n        }, this);\n    }\n    return collabEmails;\n  }\n\n  addCollaborator(formElement, value, pendingValKey) {\n    let collaborators = this.props.formData.collaborators || [];\n    collaborators.push(\n      {\n        name: value,\n        email: null,\n        notify: false,\n      }\n    );\n\n    this.props.setFormData('collaborators', collaborators);\n    this.props.setFormData(pendingValKey, null);\n  }\n\n  removeCollaborator(formElement, value) {\n    let collaborators = this.props.formData.collaborators || [];\n    collaborators = collaborators.filter((c) => c.name !== value);\n    this.props.setFormData('collaborators', collaborators);\n  }\n\n  setCollaboratorEmail(formElement, value) {\n    let collabName = formElement.split('_')[1];\n    let collaborators = this.props.formData.collaborators;\n    let i = collaborators.findIndex((c) => c.name === collabName);\n    collaborators[i].email = value;\n    this.props.setFormData('collaborators', collaborators);\n  }\n\n  toggleEmailNotify(e) {\n    if (e.target.name.indexOf('collabEmail') > -1) {\n      let collaborators = this.props.formData.collaborators;\n      let collabName = e.target.value;\n      let i = collaborators.findIndex((c) => c.name === collabName);\n      collaborators[i].notify = !collaborators[i].notify;\n      this.props.setFormData('collaborators', collaborators);\n    } else if (e.target.name === 'leadInvestigatorEmail_notify') {\n      let currNotify = this.props.formData.notifyLead || false;\n      this.props.setFormData('notifyLead', !currNotify);\n    }\n  }\n\n  render() {\n    let collabEmails = this.createCollabEmailFields();\n    let fileFields = this.createFileFields();\n\n    let voiHelp = (<div>For help finding variables of interest, consult\n      the <a href={loris.BaseURL + '/datadict/'}>Data Dictionary</a>\n      </div>);\n    let collabNames = [];\n    if (this.props.formData.collaborators) {\n      collabNames = this.props.formData.collaborators.map((c) => c.name);\n    }\n\n    let voiTypeOptions = {\n      All: 'All',\n      Behavioral: 'Behavioral',\n      Imaging: 'Imaging',\n    };\n\n    const allVOIs = this.props.allVOIs;\n    let voiOptions = {};\n    let type = this.props.formData.voiType;\n    if (type && type !== 'All') {\n      voiOptions = this.props.allVOIs[type];\n    } else {\n      // maintain behavioral VoIs by creating an object copy\n      const bvlCopy = Object.assign({}, allVOIs.Behavioral);\n      voiOptions = Object.assign(bvlCopy, allVOIs.Imaging);\n    }\n\n    return (\n      <div>\n        <TextareaElement\n          name=\"description\"\n          label=\"Description\"\n          onUserInput={this.props.setFormData}\n          required={true}\n          value={this.props.formData.description}\n        />\n        <TextboxElement\n          name=\"leadInvestigator\"\n          label=\"Lead Investigator\"\n          onUserInput={this.props.setFormData}\n          required={true}\n          value={this.props.formData.leadInvestigator}\n        />\n        <EmailElement\n          name=\"leadInvestigatorEmail\"\n          label=\"Lead Investigator Email\"\n          onUserInput={this.props.setFormData}\n          onUserBlur={this.props.validateEmail}\n          toggleEmailNotify={this.toggleEmailNotify}\n          errorMessage={this.props.formErrors.leadInvestigatorEmail}\n          required={true}\n          value={this.props.formData.leadInvestigatorEmail}\n          addressee=\"leadInvestigator\"\n        />\n        <TagsElement\n          name=\"usersWithEditPerm\"\n          id=\"usersWithEditPerm\"\n          label=\"LORIS Users with Edit Permission\"\n          options={this.props.users}\n          useSearch={true}\n          strictSearch={true}\n          onUserInput={this.props.setFormData}\n          onUserAdd={this.props.addListItem}\n          onUserRemove={this.props.removeListItem}\n          value={this.props.formData.pendingUWEP}\n          pendingValKey=\"pendingUWEP\"\n          items={this.props.formData.usersWithEditPerm}\n          btnLabel=\"Add User\"\n        />\n        <TagsElement\n          name=\"collaborators\"\n          id=\"collaborators\"\n          label=\"Collaborators\"\n          options={this.props.allCollabs}\n          useSearch={true}\n          strictSearch={false}\n          onUserInput={this.props.setFormData}\n          onUserAdd={this.addCollaborator}\n          onUserRemove={this.removeCollaborator}\n          value={this.props.formData.pendingCollab}\n          pendingValKey=\"pendingCollab\"\n          items={collabNames}\n          btnLabel=\"Add Collaborator\"\n        />\n        {collabEmails}\n        <TagsElement\n          name=\"keywords\"\n          id=\"keywords\"\n          label=\"Keywords\"\n          options={this.props.allKWs}\n          useSearch={true}\n          strictSearch={false}\n          onUserInput={this.props.setFormData}\n          onUserAdd={this.props.addListItem}\n          onUserRemove={this.props.removeListItem}\n          value={this.props.formData.pendingKWItem}\n          pendingValKey=\"pendingKWItem\"\n          items={this.props.formData.keywords}\n          btnLabel=\"Add Keyword\"\n        />\n        <SelectElement\n          name=\"voiType\"\n          label=\"Type of Variables of Interest\"\n          options={voiTypeOptions}\n          onUserInput={this.props.setFormData}\n          value={this.props.formData.voiType}\n          emptyOption={false}\n        />\n        <TagsElement\n          name=\"voiFields\"\n          id=\"voiFields\"\n          label=\"Variables of Interest\"\n          useSearch={true}\n          strictSearch={true}\n          onUserInput={this.props.setFormData}\n          onUserAdd={this.props.addListItem}\n          onUserRemove={this.props.removeListItem}\n          required={false}\n          value={this.props.formData.pendingItemVF}\n          options={voiOptions}\n          pendingValKey=\"pendingItemVF\"\n          items={this.props.formData.voiFields}\n          btnLabel=\"Add Variable of Interest\"\n        />\n        <StaticElement\n          text={voiHelp}\n        />\n        {fileFields}\n        <ButtonElement label={this.props.editMode ? 'Submit' : 'Propose Project'}/>\n      </div>\n    );\n  }\n}\n\nexport default ProjectFormFields;\n","import ViewProject from './viewProject';\n\nconst args = QueryString.get(document.currentScript.src);\n\n$(function() {\n  const viewProject = (\n    <div className=\"page-edit-form\">\n      <div className=\"row\">\n        <div className=\"col-md-9 col-lg-7\">\n          <ViewProject\n            DataURL={`${loris.BaseURL}/publication/ajax/getData.php?action=getProjectData&id=${args.id}`}\n            action={`${loris.BaseURL}/publication/ajax/FileUpload.php?action=editProject&id=${args.id}`}\n          />\n        </div>\n      </div>\n    </div>\n  );\n\n  ReactDOM.render(viewProject, document.getElementById('lorisworkspace'));\n});\n","import ProjectFormFields from './projectFields';\n\nclass ViewProject extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      formData: {},\n      formErrors: {},\n      numFiles: 0,\n      isLoaded: false,\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.setFormData = this.setFormData.bind(this);\n    this.setFileData = this.setFileData.bind(this);\n    this.createFileDownloadLinks = this.createFileDownloadLinks.bind(this);\n    this.createMenuFilterLinks = this.createMenuFilterLinks.bind(this);\n    this.createStaticComponents = this.createStaticComponents.bind(this);\n    this.createEditableComponents = this.createEditableComponents.bind(this);\n    this.addListItem = this.addListItem.bind(this);\n    this.removeListItem = this.removeListItem.bind(this);\n    this.validateEmail = this.validateEmail.bind(this);\n    this.fetchData = this.fetchData.bind(this);\n  }\n\n  validateEmail(field, email) {\n    let formErrors = this.state.formErrors;\n\n    // don't supply error if email is blank\n    if (email === '' || email === null || email === undefined) {\n      delete formErrors[field];\n      // if email is invalid, set error, else nullify error\n    } else if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(email) === false) {\n      formErrors[field] = 'Invalid email';\n    } else {\n      delete formErrors[field];\n    }\n    this.setState({formErrors});\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n\n    if (Object.keys(this.state.formErrors).length > 0) {\n      swal(\n        'Please fix any remaining form errors before submission',\n        '',\n        'error'\n      );\n      return;\n    }\n    let formData = this.state.formData;\n    let formObj = new FormData();\n    for (let key in formData) {\n      if (formData.hasOwnProperty(key) && formData[key] !== '') {\n        let formVal;\n        if (Array.isArray(formData[key])) {\n          formVal = JSON.stringify(formData[key]);\n        } else {\n          formVal = formData[key];\n        }\n        formObj.append(key, formVal);\n      }\n    }\n\n    $.ajax({\n      type: 'POST',\n      url: this.props.action,\n      data: formObj,\n      cache: false,\n      contentType: false,\n      processData: false,\n      success: function() {\n        swal('Edit Successful!', '', 'success');\n      },\n      error: function(jqXHR) {\n        console.error(jqXHR);\n        let resp = 'Something went wrong!';\n        try {\n          resp = JSON.parse(jqXHR.responseText).message;\n        } catch (e) {\n          console.error(e);\n        }\n        swal('Edit failed!', resp, 'error');\n      },\n    });\n  }\n\n  fetchData() {\n    let self = this;\n    $.ajax(this.props.DataURL, {\n      dataType: 'json',\n      success: function(data) {\n        let formData = {\n          title: data.title,\n          description: data.description,\n          leadInvestigator: data.leadInvestigator,\n          leadInvestigatorEmail: data.leadInvestigatorEmail,\n          notifyLead: false,\n          status: data.status,\n          voiFields: data.voi,\n          keywords: data.keywords,\n          collaborators: data.collaborators,\n          usersWithEditPerm: data.usersWithEditPerm,\n          rejectedReason: data.rejectedReason,\n        };\n        // set formdata for file meta data\n        if (data.files) {\n          data.files.forEach(function(f) {\n            let existFileFlag = 'existingUpload_';\n            let pubType = existFileFlag + 'publicationType_' + f.PublicationUploadID;\n            let pubCit = existFileFlag + 'publicationCitation_' + f.PublicationUploadID;\n            let pubVer = existFileFlag + 'publicationVersion_' + f.PublicationUploadID;\n            formData[pubType] = f.PublicationUploadTypeID;\n            formData[pubCit] = f.Citation;\n            formData[pubVer] = f.Version;\n          });\n        }\n\n        self.setState({\n          formData: formData,\n          users: data.users,\n          statusOpts: data.statusOpts,\n          userCanEdit: data.userCanEdit,\n          allVOIs: data.allVOIs,\n          allKWs: data.allKWs,\n          allCollabs: data.allCollabs,\n          uploadTypes: data.uploadTypes,\n          files: data.files,\n          isLoaded: true,\n        });\n      },\n      error: function(error, errorCode, errorMsg) {\n        console.error(error, errorCode, errorMsg);\n        self.setState({\n          error: 'An error occurred when loading the form!',\n        });\n      },\n    });\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  createFileDownloadLinks() {\n    let files = this.state.files;\n    let toReturn = [];\n    files.forEach(function(f) {\n      let download = loris.BaseURL + '/publication/ajax/FileDownload.php?File=' + f.URL;\n      let link = <a href={download}>{f.URL}</a>;\n      let uploadType = this.state.uploadTypes[f.PublicationUploadTypeID];\n      toReturn.push(\n          <StaticElement\n            label={'Download ' + uploadType}\n            text={link}\n          />\n      );\n      if (f.Citation) {\n        toReturn.push(\n          <StaticElement\n            label=\"Citation\"\n            text={f.Citation}\n          />\n        );\n      }\n      if (f.Version) {\n        toReturn.push(\n          <StaticElement\n            label=\"Version\"\n            text={f.Version}\n          />\n        );\n      }\n    }, this);\n\n    return toReturn;\n  }\n\n  createMenuFilterLinks(stringArr, filterVar) {\n    let links = [];\n    stringArr.forEach(\n      function(value) {\n        links.push(\n          <span>\n            <a\n              href={loris.BaseURL + '/publication/?' + filterVar + '=' + value}\n            >\n              {value}\n            </a>\n            ; &nbsp;\n          </span>\n        );\n      }\n    );\n\n    return links;\n  }\n\n  createStaticComponents() {\n    let collaborators;\n    let keywords;\n    let vois;\n    let collabLinks;\n    let keywordLinks;\n    let voiLinks;\n    let files;\n\n    if (this.state.formData.collaborators.length > 0) {\n      collabLinks = this.createMenuFilterLinks(\n        this.state.formData.collaborators.map((c) => c.name),\n        'collaborators'\n      );\n      collaborators = <StaticElement\n        name=\"collaborators\"\n        label=\"Collaborators\"\n        text={collabLinks}\n      />;\n    }\n\n    if (this.state.formData.keywords.length > 0) {\n      keywordLinks = this.createMenuFilterLinks(\n        this.state.formData.keywords,\n        'keywords'\n      );\n      keywords = <StaticElement\n        name=\"keywords\"\n        label=\"Keywords\"\n        text={keywordLinks}\n      />;\n    }\n\n    if (this.state.formData.voiFields.length > 0) {\n      voiLinks = this.createMenuFilterLinks(\n        this.state.formData.voiFields,\n        'voi'\n      );\n      vois = <StaticElement\n        name=\"variablesOfInterest\"\n        label=\"Variables of Interest\"\n        text={voiLinks}\n      />;\n    }\n\n    if (this.state.files.length > 0) {\n      files = this.createFileDownloadLinks();\n    }\n    return (\n      <div>\n        <StaticElement\n          name=\"description\"\n          label=\"Description\"\n          text={this.state.formData.description}\n        />\n        <StaticElement\n          name=\"leadInvestigator\"\n          label=\"Lead Investigator\"\n          text={this.state.formData.leadInvestigator}\n        />\n        <StaticElement\n         name=\"leadInvestigatorEmail\"\n         label=\"Lead Investigator Email\"\n         text={this.state.formData.leadInvestigatorEmail}\n        />\n        {collaborators}\n        {keywords}\n        {vois}\n        {files}\n      </div>\n   );\n  }\n\n  createEditableComponents() {\n    return (\n      <div>\n        <ProjectFormFields\n          files={this.state.files}\n          numFiles={this.state.numFiles}\n          formData={this.state.formData}\n          formErrors={this.state.formErrors}\n          setFormData={this.setFormData}\n          setFileData={this.setFileData}\n          addListItem={this.addListItem}\n          removeListItem={this.removeListItem}\n          validateEmail={this.validateEmail}\n          toggleEmailNotify={this.toggleEmailNotify}\n          uploadTypes={this.state.uploadTypes}\n          users={this.state.users}\n          allVOIs={this.state.allVOIs}\n          allKWs={this.state.allKWs}\n          allCollabs={this.state.allCollabs}\n          editMode={true}\n          fetchData={this.fetchData}\n        />\n      </div>\n    );\n  }\n\n  addListItem(formElement, value, pendingValKey) {\n    let formData = this.state.formData;\n    let listItems = formData[formElement] || [];\n    listItems.push(value);\n    formData[formElement] = listItems;\n    formData[pendingValKey] = null;\n    this.setState({\n      formData: formData,\n    });\n  }\n\n  removeListItem(formElement, value) {\n    let formData = this.state.formData;\n    let listItems = formData[formElement];\n    let index = listItems.indexOf(value);\n\n    if (index > -1) {\n      listItems.splice(index, 1);\n\n      formData[formElement] = listItems;\n      this.setState({\n        formData: formData,\n      });\n    }\n  }\n\n  setFormData(formElement, value) {\n    let formData = this.state.formData;\n    formData[formElement] = value;\n    this.setState({\n      formData: formData,\n    });\n  }\n\n  setFileData(formElement, value) {\n    let numFiles = this.state.numFiles;\n    if (!this.state.formData[formElement]) {\n      numFiles += 1;\n      this.setState({numFiles: numFiles});\n    }\n    this.setFormData(formElement, value);\n  }\n\n  render() {\n    if (!this.state.isLoaded) {\n      return (\n        <button className=\"btn-info has-spinner\">\n          Loading\n          <span\n            className=\"glyphicon glyphicon-refresh glyphicon-refresh-animate\">\n          </span>\n        </button>\n      );\n    }\n    let statusElement;\n    let rejectReason;\n    let reviewBtn;\n    let statusID = this.state.formData.status;\n    let status = this.state.statusOpts[statusID];\n    if (loris.userHasPermission('publication_approve')) {\n      // if user has publication_approve permission, this means that status\n      // in formData reflects the ID, not the description\n      statusElement = <SelectElement\n        name=\"status\"\n        label=\"Status\"\n        id=\"status\"\n        value={this.state.formData.status}\n        onUserInput={this.setFormData}\n        required={true}\n        options={this.state.statusOpts}\n        emptyOption={false}\n      />;\n\n      if (status === 'Rejected') {\n        rejectReason = <TextboxElement\n          name=\"rejectedReason\"\n          label=\"Reason for rejection\"\n          value={this.state.formData.rejectedReason}\n          onUserInput={this.setFormData}\n          required={true}\n        />;\n      }\n      // Set review button only if user does not have edit permission\n      // to avoid having 2 submit buttons\n      reviewBtn = this.state.userCanEdit ? undefined : <ButtonElement label=\"Submit\" />;\n    } else {\n      const statClassMap = {\n        Pending: 'text-warning',\n        Approved: 'text-success',\n        Rejected: 'text-danger',\n      };\n      let statusText = (\n        <span className={statClassMap[status]}>\n          <strong>{status}</strong>\n        </span>\n      );\n      statusElement = <StaticElement\n        label=\"Status\"\n        text={statusText}\n      />;\n      if (status === 'Rejected') {\n        rejectReason = <StaticElement\n          label=\"Reason for rejection\"\n          text={this.state.formData.rejectedReason}\n        />;\n      }\n    }\n\n    let formElements;\n    if (this.state.userCanEdit) {\n      formElements = this.createEditableComponents();\n    } else {\n      formElements = this.createStaticComponents();\n    }\n\n    // only allow the title to be editable if user has editing access\n    // and proposal is still unreviewed\n    let title;\n    if (this.state.userCanEdit && status === 'Pending') {\n      title = (\n        <TextboxElement\n          name=\"title\"\n          label=\"Title\"\n          onUserInput={this.setFormData}\n          required={true}\n          value={this.state.formData.title}\n        />\n      );\n    } else {\n      title = (\n        <div className=\"row\">\n          <div className=\"col-md-3\"/>\n          <h3 className=\"col-md-9\">\n            {this.state.formData.title}\n          </h3>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"row\">\n        <div className=\"col-md-12 col-lg-12\">\n          <FormElement\n            name=\"viewProject\"\n            onSubmit={this.handleSubmit}\n            ref=\"form\"\n          >\n            {title}\n            {statusElement}\n            {rejectReason}\n            {formElements}\n            {reviewBtn}\n          </FormElement>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ViewProject;\n"],"sourceRoot":""}